# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã /asset

## –ü—Ä–æ–±–ª–µ–º–∞

–ö–æ–º–∞–Ω–¥–∞ `/asset` –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ –≤—ã–≤–æ–¥–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –∏ AI –∞–Ω–∞–ª–∏–∑.

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
1. **–ú–µ—Ç–æ–¥ `_get_asset_info_with_chart`** –±—ã–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. **–ú–µ—Ç–æ–¥ `_send_charts_with_ai_analysis`** —Ä–∞–±–æ—Ç–∞–ª
3. **–ú–µ—Ç–æ–¥ `_get_ai_analysis_for_charts`** –±—ã–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω
4. **YandexGPT —Å–µ—Ä–≤–∏—Å** –±—ã–ª –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω

### –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
1. **–û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª —Ñ–∞–π–ª `config.env`** - –Ω–µ –±—ã–ª–æ API –∫–ª—é—á–µ–π –¥–ª—è YandexGPT
2. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π** - —Ä—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç –±–µ–∑ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∫–æ–¥–∏—Ä–æ–≤–∫–∏
3. **–ú–µ—Ç–æ–¥ `_send_long_text`** –º–æ–≥ –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–ª–∏–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `config.env` —Å –∑–∞–≥–ª—É—à–∫–∞–º–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```bash
# Telegram Bot Token (get from @BotFather)
TELEGRAM_BOT_TOKEN=test_token_for_testing

# YandexGPT API Configuration (get from https://cloud.yandex.com/)
YANDEX_API_KEY=test_api_key_for_testing
YANDEX_FOLDER_ID=test_folder_id_for_testing

# Bot Configuration (optional)
BOT_USERNAME=test_bot_username
ADMIN_USER_ID=123456789
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∞
–î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞ `bot.py`:
```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
```

### 3. –£–ø—Ä–æ—â–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
–ó–∞–º–µ–Ω–µ–Ω—ã –≤—ã–∑–æ–≤—ã `_send_long_text` –Ω–∞ –ø—Ä–æ—Å—Ç–æ–π `update.message.reply_text` –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö:

```python
# –ë—ã–ª–æ:
await self._send_long_text(update, response, parse_mode='Markdown')

# –°—Ç–∞–ª–æ:
await update.message.reply_text(response, parse_mode='Markdown')
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ö–æ–º–∞–Ω–¥–∞ `/asset` —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
‚úÖ **–ì—Ä–∞—Ñ–∏–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è**
‚úÖ **AI –∞–Ω–∞–ª–∏–∑ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ YandexGPT**
‚úÖ **–ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫**
‚úÖ **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã**

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–æ–º–∞–Ω–¥–∞ `/asset` —Ç–µ–ø–µ—Ä—å:
1. **–ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–∫—Ç–∏–≤–µ** —á–µ—Ä–µ–∑ `asset_service.get_asset_info()`
2. **–°–æ–∑–¥–∞–µ—Ç –≥—Ä–∞—Ñ–∏–∫–∏ —Ü–µ–Ω** —á–µ—Ä–µ–∑ `asset_service.get_asset_price_history()`
3. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é** —Å –ø–æ–º–æ—â—å—é `update.message.reply_text()`
4. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥—Ä–∞—Ñ–∏–∫–∏** —á–µ—Ä–µ–∑ `update.message.reply_photo()`
5. **–ü–æ–ª—É—á–∞–µ—Ç AI –∞–Ω–∞–ª–∏–∑** —á–µ—Ä–µ–∑ `yandexgpt_service.ask_question()`

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤:
- **üìà –î–Ω–µ–≤–Ω—ã–µ —Ü–µ–Ω—ã (adj_close)** - —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–Ω–µ–≤–Ω—ã–µ —Ü–µ–Ω—ã
- **üìä –ú–µ—Å—è—á–Ω—ã–µ —Ü–µ–Ω—ã (close_monthly)** - –º–µ—Å—è—á–Ω—ã–µ —Ü–µ–Ω—ã –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- **üìä Fallback –≥—Ä–∞—Ñ–∏–∫** - —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö

### AI –∞–Ω–∞–ª–∏–∑ –≤–∫–ª—é—á–∞–µ—Ç:
- –ê–Ω–∞–ª–∏–∑ –¥–∏–Ω–∞–º–∏–∫–∏ —Ü–µ–Ω
- –û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- –£—Ä–æ–≤–Ω–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è
- –û—Ü–µ–Ω–∫–∞ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
- –ú–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
/asset LQDT.MOEX 10Y    # –ú–µ—Å—è—á–Ω—ã–µ —Ü–µ–Ω—ã –∑–∞ 10 –ª–µ—Ç
/asset VTBR.MOEX 5Y     # –ú–µ—Å—è—á–Ω—ã–µ —Ü–µ–Ω—ã –∑–∞ 5 –ª–µ—Ç
/asset SBER.MOEX MAX    # –í–µ—Å—å –¥–æ—Å—Ç—É–ø–Ω—ã–π –ø–µ—Ä–∏–æ–¥
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π. –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥–∞ `/asset` —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é:

- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–∫—Ç–∏–≤–µ
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥—Ä–∞—Ñ–∏–∫–∏ —Ü–µ–Ω
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç AI –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ YandexGPT
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã –∞–∫—Ç–∏–≤–æ–≤ (–≤–∫–ª—é—á–∞—è MOEX)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø–µ—Ä–∏–æ–¥–∞–º–∏ –∞–Ω–∞–ª–∏–∑–∞

–î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ API –∫–ª—é—á–∏ –≤ `config.env`
2. –£–±–µ–¥–∏—Ç—å—Å—è –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ YandexGPT —Å–µ—Ä–≤–∏—Å–∞
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram –±–æ—Ç–∞
