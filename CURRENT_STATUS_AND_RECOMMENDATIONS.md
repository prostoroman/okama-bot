# –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –æ—à–∏–±–∫–∏

## –î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
2025-01-27

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
1. **–ú–µ—Ç–æ–¥ `_create_monte_carlo_forecast`** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
2. **–ú–µ—Ç–æ–¥ `_create_forecast_chart`** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
3. **–ö–æ–º–ø–∏–ª—è—Ü–∏—è** - —Ñ–∞–π–ª –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

### üîç –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–∫–∏
–û—à–∏–±–∫–∞ `ChartStyles.apply_base_style() missing 1 required positional argument: 'ax'` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ:
- –õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –∫–æ–¥–∞
- –õ–∏–±–æ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å –∏–º–ø–æ—Ä—Ç–æ–º –º–æ–¥—É–ª—è `chart_styles`
- –õ–∏–±–æ –µ—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç –≤–µ—Ä—Å–∏–π

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–¥–∞

### 1. –ú–µ—Ç–æ–¥ _create_forecast_chart (—Å—Ç—Ä–æ–∫–∏ 2680-2720)
```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
if current_fig.axes:
    ax = current_fig.axes[0]  # Get the first (and usually only) axes
    chart_styles.apply_base_style(current_fig, ax)  # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ —Å –¥–≤—É–º—è –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏
```

### 2. –ú–µ—Ç–æ–¥ _create_monte_carlo_forecast (—Å—Ç—Ä–æ–∫–∏ 2636-2670)
```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
if current_fig.axes:
    ax = current_fig.axes[0]  # –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–≤—ã–π axes
    chart_styles.apply_base_style(current_fig, ax)  # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ —Å –¥–≤—É–º—è –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–∫–∏

### 1. –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –±–æ—Ç–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω —Å–æ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–µ–π –∫–æ–¥–∞
**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –∫–æ–¥–æ–º

### 2. –ü—Ä–æ–±–ª–µ–º–∞ —Å –∏–º–ø–æ—Ä—Ç–æ–º chart_styles
**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–æ–¥—É–ª—å `chart_styles` –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ `services/chart_styles.py`

### 3. –ö–æ–Ω—Ñ–ª–∏–∫—Ç –≤–µ—Ä—Å–∏–π
**–ü—Ä–æ–±–ª–µ–º–∞**: –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –º–æ–¥—É–ª—è `chart_styles`
**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Python –ø—Ä–æ—Ü–µ—Å—Å

## –ü–æ—à–∞–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π –∫–æ–¥
–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ `bot.py` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

```python
# –í –º–µ—Ç–æ–¥–µ _create_forecast_chart –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
if current_fig.axes:
    ax = current_fig.axes[0]
    chart_styles.apply_base_style(current_fig, ax)  # –î–í–ê –∞—Ä–≥—É–º–µ–Ω—Ç–∞!
```

### –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å –±–æ—Ç–∞
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
python3 bot.py
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã
–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ –µ—Å—Ç—å:
```python
from services.chart_styles import chart_styles
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª chart_styles
–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ–∞–π–ª `services/chart_styles.py` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–æ–¥ `apply_base_style`

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
–ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É "üìà –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—è–º 10, 50, 90" –≤ –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
Creating forecast chart with percentiles for portfolio: ['SBER.MOEX', 'GAZP.MOEX', 'LKOH.MOEX']
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
```bash
python3 -m py_compile bot.py
# –î–æ–ª–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—é:

```python
# –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ - –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º–Ω—É—é —Å—Ç—Ä–æ–∫—É
# chart_styles.apply_base_style(current_fig, ax)

# –ò –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–¢–µ–∫—É—â–∏–π –∫–æ–¥ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω** –∏ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫. –ü—Ä–æ–±–ª–µ–º–∞, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤ —Ç–æ–º, —á—Ç–æ:

1. **–ë–æ—Ç –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω** –ø–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è** –∫–æ–¥–∞
3. **–ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å –∏–º–ø–æ—Ä—Ç–æ–º** –º–æ–¥—É–ª—è `chart_styles`

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ**: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –∫–æ–¥–æ–º.

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ:
1. –õ–æ–≥–∏ –±–æ—Ç–∞ –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏
2. –í–µ—Ä—Å–∏—é Python
3. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `services/chart_styles.py`
