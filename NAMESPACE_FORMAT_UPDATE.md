# Обновление формата вывода команды /namespace

## Описание изменений
Команда `/namespace` теперь выводит подробную информацию о каждом символе в виде таблицы с колонками: **Символ | Название | Страна | Валюта**.

## Что изменилось

### Было (группировка по буквам):
```
📊 Символы в пространстве CBR:

A:
`AEDRUB` | `AFNRUB` | `AMDRUB`
`AOARUB`

B:
`BYRRUB`

C:
`CNYRUB`

...

📈 Всего символов: 286
```

### Стало (статистика + красивые таблицы):

#### Команда `/namespace` (без аргументов):
```
📚 Доступные пространства имен (namespaces):

📈 Статистика:
• Всего пространств имен: 19

┌───────┬────────────────────────────────────────────────┬──────────────┐
│ Код   │ Описание                                       │ Категория    │
├───────┼────────────────────────────────────────────────┼──────────────┤
│ LSE   │ London Stock Exchange                          │ Биржи        │
│ MOEX  │ Moscow Exchange                                │ Биржи        │
│ US    │ US Stock Exchanges and mutual funds            │ Биржи        │
│ ...   │ ...                                            │ ...          │
└───────┴────────────────────────────────────────────────┴──────────────┘
```

#### Команда `/namespace <название>` (с аргументом):
```
📊 Пространство имен: CBR

📈 Статистика:
• Всего символов: 286
• Колонки данных: symbol, ticker, name, country, exchange, currency, type, isin

Первые 10 символов:
┌────────────┬──────────────────────────────────────────┬──────────┬──────────┐
│ Символ     │ Название                                 │ Страна   │ Валюта   │
├────────────┼──────────────────────────────────────────┼──────────┼──────────┤
│ AEDRUB.CBR │ Central Bank of Russia exchange rate... │ Russia   │ RUB      │
│ AFNRUB.CBR │ Central Bank of Russia exchange rate... │ Russia   │ RUB      │
│ ALLRUB.CBR │ Central Bank of Russia exchange rate... │ Russia   │ RUB      │
│ ...        │ ...                                      │ ...      │ ...      │
└────────────┴──────────────────────────────────────────┴──────────┴──────────┘

Последние 10 символов:
┌────────────┬──────────────────────────────────────────┬──────────┬──────────┐
│ Символ     │ Название                                 │ Страна   │ Валюта   │
├────────────┼──────────────────────────────────────────┼──────────┼──────────┤
│ XDRRUB.CBR │ Central Bank of Russia exchange rate... │ Russia   │ RUB      │
│ XEURUB.CBR │ Central Bank of Russia exchange rate... │ Russia   │ RUB      │
│ ...        │ ...                                      │ ...      │ ...      │
└────────────┴──────────────────────────────────────────┴──────────┴──────────┘

💡 Используйте /info <символ> для получения подробной информации об активе

📊 **Excel файл со всеми символами:**
После таблиц автоматически отправляется Excel файл с полным списком всех символов в пространстве имен.

## Преимущества нового формата

### ✅ Больше информации:
- **Символ** - полное название (например, 'AAPL.US')
- **Название** - описание актива/валюты
- **Страна** - страна происхождения
- **Валюта** - валюта котировки

### ✅ Лучшая читаемость:
- Табличный формат с четкими колонками
- Разделители между колонками
- Обрезание длинных названий для компактности

### ✅ Полная информация:
- Пользователь видит не только тикер, но и описание
- Понимает, что именно представляет каждый символ
- Может выбрать нужный актив по описанию

### ✅ Категоризация пространств имен:
- Автоматическая группировка по типам (Биржи, Валюты, Товары и т.д.)
- Логическая организация для лучшего понимания
- Сортировка по категориям и алфавиту

## Примеры вывода

### CBR (Центральный банк России):
```
`AEDRUB.CBR` | Central Bank of Russia exchange rate... | Russia | RUB
`AFNRUB.CBR` | Central Bank of Russia exchange rate... | Russia | RUB
`ALLRUB.CBR` | Central Bank of Russia exchange rate... | Russia | RUB
```

### MOEX (Московская биржа):
```
`ABIO.MOEX` | ARTGEN | Russia | RUB
`ABRD.MOEX` | Abrau Durso OAO | Russia | RUB
`ACKO.MOEX` | Public joint-stock company Asko-Strak... | Russia | RUB
```

### INDX (Индексы):
```
`000906.INDX` | China Securities 800 | China | USD
`0O7N.INDX` | FTSE 100 | United Kingdom | GBP
`5SP2550.INDX` | S&P 500 | United States | USD
```

## Технические детали

### Обработка данных:
- Использование `pd.notna()` для проверки на NaN
- Fallback на 'N/A' для пустых значений
- Обрезание названий длиннее 40 символов

### Форматирование:
- Markdown таблица с заголовками
- Разделители колонок через ` | `
- Символы в обратных кавычках для выделения

### Производительность:
- Итерация по DataFrame через `iterrows()`
- Обработка всех строк без группировки
- Эффективное использование памяти

### Excel экспорт:
- Автоматическое создание Excel файлов в памяти
- Все колонки данных сохраняются в файле
- Именованные листы для каждого namespace
- Оптимизированный размер файлов

## Совместимость
- ✅ Работает со всеми namespace okama
- ✅ Обрабатывает различные типы данных
- ✅ Graceful fallback при ошибках
- ✅ Сохраняет все существующие функции

## Тестирование
Новый формат протестирован:
- ✅ CBR namespace (286 валютных пар)
- ✅ MOEX namespace (334 акции)
- ✅ INDX namespace (1781 индекс)
- ✅ Корректное отображение всех колонок
- ✅ Обработка длинных названий

## Заключение
Команда `/namespace` теперь предоставляет гораздо более информативный и полезный вывод, позволяя пользователям не только видеть доступные символы, но и понимать, что каждый из них представляет.
