# –û—Ç—á–µ—Ç –æ–± —É–ª—É—á—à–µ–Ω–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∫–æ–º–∞–Ω–¥—ã /portfolio

## üéØ –¶–µ–ª—å
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–ª—è –∫–æ–º–∞–Ω–¥—ã `/portfolio` —Ç–∞–∫—É—é –∂–µ –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π, –∫–∞–∫ —É –∫–æ–º–∞–Ω–¥—ã `/compare`, —á—Ç–æ–±—ã –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å –Ω–∞ –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –∏ —Å–∫—Ä—ã–≤–∞–ª–∞—Å—å –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_create_portfolio_command_keyboard`
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 7525-7556
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ –∫–æ–º–∞–Ω–¥—ã `/portfolio`
- **–°–æ–¥–µ—Ä–∂–∏—Ç –∫–Ω–æ–ø–∫–∏**:
  - üìà –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (–Ω–∞–∫–æ–ø.)
  - üí∞ –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (–ì–ì)
  - üìâ –ü—Ä–æ—Å–∞–¥–∫–∏
  - üìä –†–∏—Å–∫ –º–µ—Ç—Ä–∏–∫–∏
  - üé≤ –ú–æ–Ω—Ç–µ –ö–∞—Ä–ª–æ
  - üìà –ü—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏ 10, 50, 90
  - üìä –ü–æ—Ä—Ç—Ñ–µ–ª—å vs –ê–∫—Ç–∏–≤—ã
  - üìà –°–∫–æ–ª—å–∑—è—â–∞—è CAGR
  - üíµ –î–∏–≤–∏–¥–µ–Ω–¥—ã

### 2. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –ø–æ—Ä—Ç—Ñ–µ–ª—è

#### üìâ –ü—Ä–æ—Å–∞–¥–∫–∏
- **–§—É–Ω–∫—Ü–∏—è**: `_create_portfolio_drawdowns_chart` (—Å—Ç—Ä–æ–∫–∞ 11832)
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –ø—Ä–æ—Å–∞–¥–æ–∫

#### üí∞ –î–∏–≤–∏–¥–µ–Ω–¥—ã
- **–§—É–Ω–∫—Ü–∏—è**: `_create_portfolio_dividends_chart` (—Å—Ç—Ä–æ–∫–∞ 11910)
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –¥–∏–≤–∏–¥–µ–Ω–¥–æ–≤

#### üí∞ –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (–ì–ì)
- **–§—É–Ω–∫—Ü–∏—è**: `_create_portfolio_returns_chart` (—Å—Ç—Ä–æ–∫–∞ 12291)
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –≥–æ–¥–æ–≤–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏

#### üìà –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (–Ω–∞–∫–æ–ø.)
- **–§—É–Ω–∫—Ü–∏—è**: `_create_portfolio_wealth_chart` (—Å—Ç—Ä–æ–∫–∞ 12562)
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏

#### üìà –°–∫–æ–ª—å–∑—è—â–∞—è CAGR
- **–§—É–Ω–∫—Ü–∏—è**: `_create_portfolio_rolling_cagr_chart` (—Å—Ç—Ä–æ–∫–∞ 12868)
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ —Å–∫–æ–ª—å–∑—è—â–µ–π CAGR

#### üìä –ü–æ—Ä—Ç—Ñ–µ–ª—å vs –ê–∫—Ç–∏–≤—ã
- **–§—É–Ω–∫—Ü–∏—è**: `_create_portfolio_compare_assets_chart` (—Å—Ç—Ä–æ–∫–∞ 13132)
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª—è —Å –∞–∫—Ç–∏–≤–∞–º–∏

#### üìä –†–∏—Å–∫ –º–µ—Ç—Ä–∏–∫–∏
- **–§—É–Ω–∫—Ü–∏—è**: `_create_risk_metrics_report` (—Å—Ç—Ä–æ–∫–∞ 10369)
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º —Å Excel —Ñ–∞–π–ª–∞–º–∏ –º–µ—Ç—Ä–∏–∫

#### üé≤ –ú–æ–Ω—Ç–µ –ö–∞—Ä–ª–æ
- **–§—É–Ω–∫—Ü–∏—è**: `_create_monte_carlo_forecast` (—Å—Ç—Ä–æ–∫–∞ 11532)
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ Monte Carlo

#### üìà –ü—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏ 10, 50, 90
- **–§—É–Ω–∫—Ü–∏—è**: `_create_forecast_chart` (—Å—Ç—Ä–æ–∫–∞ 11577)
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã
1. **–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏**: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —É–¥–∞–ª—è–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
2. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞**: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≥—Ä–∞—Ñ–∏–∫, –∞–Ω–∞–ª–∏–∑ –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ
3. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –°–æ–∑–¥–∞–µ—Ç—Å—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –ø–æ–º–æ—â—å—é `_create_portfolio_command_keyboard`
4. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è**: –ö–æ–Ω—Ç–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
```python
def _create_portfolio_command_keyboard(self, portfolio_symbol: str) -> InlineKeyboardMarkup:
    keyboard = []
    
    # Add portfolio analysis buttons
    keyboard.append([
        InlineKeyboardButton("üìà –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (–Ω–∞–∫–æ–ø.)", callback_data=f"portfolio_wealth_chart_{portfolio_symbol}"),
        InlineKeyboardButton("üí∞ –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (–ì–ì)", callback_data=f"portfolio_returns_{portfolio_symbol}")
    ])
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
```

### –õ–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –ø–æ–¥—Ö–æ–¥:
```python
# Create keyboard for portfolio command
portfolio_symbol = ','.join(symbols)  # Use symbols as portfolio identifier
keyboard = self._create_portfolio_command_keyboard(portfolio_symbol)

# Remove keyboard from previous message before sending new message
await self._remove_keyboard_before_new_message(update, context)

# Send the chart with keyboard
await context.bot.send_photo(
    chat_id=update.effective_chat.id,
    photo=img_buffer,
    caption=self._truncate_caption(caption),
    reply_markup=keyboard
)
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –∫–æ–º–∞–Ω–¥–∞ `/portfolio` —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∫–æ–º–∞–Ω–¥–µ `/compare`:
- ‚úÖ –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —É–¥–∞–ª—è–µ—Ç—Å—è —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π –ø–æ—Ä—Ç—Ñ–µ–ª—è
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –ø–æ —Ñ—É–Ω–∫—Ü–∏—è–º –ø–æ—Ä—Ç—Ñ–µ–ª—è
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π UX –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—Ç –∂–µ –º–µ—Ö–∞–Ω–∏–∑–º —É–¥–∞–ª–µ–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, —á—Ç–æ –∏ –≤ –∫–æ–º–∞–Ω–¥–µ `/compare`
- –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ—Ä—Ç—Ñ–µ–ª—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
