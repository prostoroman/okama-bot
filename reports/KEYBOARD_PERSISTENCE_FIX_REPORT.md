# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –∏—Å—á–µ–∑–∞—é—â–∏–º–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏

## üéØ –¶–µ–ª—å
–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É, –∫–æ–≥–¥–∞ Reply Keyboard –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏ —Å—Ä–∞–∑—É –∏—Å—á–µ–∑–∞–µ—Ç —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥, —á—Ç–æ –Ω–µ—É–¥–æ–±–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞:
- Reply Keyboard –¥–ª—è –∫–æ–º–∞–Ω–¥ `/compare` –∏ `/portfolio` –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å—á–µ–∑–∞–µ—Ç —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
- –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `_send_ephemeral_message()` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `delete_after=5`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É—Å–ø–µ–≤–∞–µ—Ç –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π

### –ü—Ä–∏—á–∏–Ω–∞:
- –§—É–Ω–∫—Ü–∏–∏ `_show_compare_reply_keyboard()` –∏ `_show_portfolio_reply_keyboard()` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ ephemeral —Å–æ–æ–±—â–µ–Ω–∏—è
- Ephemeral —Å–æ–æ–±—â–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
- –≠—Ç–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, –Ω–æ –Ω–µ –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–§—É–Ω–∫—Ü–∏—è `_show_compare_reply_keyboard()`** (—Å—Ç—Ä–æ–∫–∞ 9671) - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ `_send_ephemeral_message()` —Å `delete_after=5`
2. **–§—É–Ω–∫—Ü–∏—è `_show_portfolio_reply_keyboard()`** (—Å—Ç—Ä–æ–∫–∞ 9656) - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ `_send_ephemeral_message()` —Å `delete_after=5`

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ _show_compare_reply_keyboard

**–§–∞–π–ª:** `bot.py`
**–§—É–Ω–∫—Ü–∏—è:** `_show_compare_reply_keyboard()`
**–°—Ç—Ä–æ–∫–∏:** 9671-9683

**–ë—ã–ª–æ:**
```python
async def _show_compare_reply_keyboard(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Show Reply Keyboard for compare management"""
    try:
        compare_reply_keyboard = self._create_compare_reply_keyboard()
        # Send ephemeral message that auto-deletes
        await self._send_ephemeral_message(
            update, context, 
            "üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∞–Ω–∞–ª–∏–∑—É", 
            parse_mode='Markdown', 
            reply_markup=compare_reply_keyboard,
            delete_after=5
        )
    except Exception as e:
        self.logger.error(f"Error showing compare reply keyboard: {e}")
```

**–°—Ç–∞–ª–æ:**
```python
async def _show_compare_reply_keyboard(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Show Reply Keyboard for compare management"""
    try:
        compare_reply_keyboard = self._create_compare_reply_keyboard()
        # Send persistent message with keyboard
        await self._send_message_safe(
            update, 
            "üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∞–Ω–∞–ª–∏–∑—É", 
            parse_mode='Markdown', 
            reply_markup=compare_reply_keyboard
        )
    except Exception as e:
        self.logger.error(f"Error showing compare reply keyboard: {e}")
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ _show_portfolio_reply_keyboard

**–§–∞–π–ª:** `bot.py`
**–§—É–Ω–∫—Ü–∏—è:** `_show_portfolio_reply_keyboard()`
**–°—Ç—Ä–æ–∫–∏:** 9656-9668

**–ë—ã–ª–æ:**
```python
async def _show_portfolio_reply_keyboard(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Show Reply Keyboard for portfolio management"""
    try:
        portfolio_reply_keyboard = self._create_portfolio_reply_keyboard()
        # Send ephemeral message that auto-deletes
        await self._send_ephemeral_message(
            update, context, 
            "üìä –ü–æ—Ä—Ç—Ñ–µ–ª—å –≥–æ—Ç–æ–≤ –∫ –∞–Ω–∞–ª–∏–∑—É", 
            parse_mode='Markdown', 
            reply_markup=portfolio_reply_keyboard,
            delete_after=5
        )
    except Exception as e:
        self.logger.error(f"Error showing portfolio reply keyboard: {e}")
```

**–°—Ç–∞–ª–æ:**
```python
async def _show_portfolio_reply_keyboard(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Show Reply Keyboard for portfolio management"""
    try:
        portfolio_reply_keyboard = self._create_portfolio_reply_keyboard()
        # Send persistent message with keyboard
        await self._send_message_safe(
            update, 
            "üìä –ü–æ—Ä—Ç—Ñ–µ–ª—å –≥–æ—Ç–æ–≤ –∫ –∞–Ω–∞–ª–∏–∑—É", 
            parse_mode='Markdown', 
            reply_markup=portfolio_reply_keyboard
        )
    except Exception as e:
        self.logger.error(f"Error showing portfolio reply keyboard: {e}")
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω–µ–Ω–∏—è:
1. **–ó–∞–º–µ–Ω–µ–Ω `_send_ephemeral_message()` –Ω–∞ `_send_message_safe()`**
2. **–£–¥–∞–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `delete_after=5`**
3. **–£–¥–∞–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `context`** (–Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è `_send_message_safe()`)
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä**

### –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
- **`_send_ephemeral_message()`**: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
- **`_send_message_safe()`**: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —á–∞—Ç–µ

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- ‚úÖ **–ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –æ—Å—Ç–∞—é—Ç—Å—è**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è
- ‚úÖ **–õ—É—á—à–∏–π UX**: –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ç–æ—Ä–æ–ø–∏—Ç—å—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –Ω–µ –∏—Å—á–µ–∑–∞—é—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –ú–µ–Ω—å—à–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. **–ö–æ–º–∞–Ω–¥–∞ `/compare`**:
   - ‚úÖ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∏ –æ—Å—Ç–∞—Ç—å—Å—è
   - ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –≤—Ä–µ–º—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫
   - ‚úÖ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

2. **–ö–æ–º–∞–Ω–¥–∞ `/portfolio`**:
   - ‚úÖ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∏ –æ—Å—Ç–∞—Ç—å—Å—è
   - ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –≤—Ä–µ–º—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫
   - ‚úÖ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

3. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–∞–º–∏**:
   - ‚úÖ –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –æ—Ç –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã –∫ –¥—Ä—É–≥–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è
   - ‚úÖ –°—Ç–∞—Ä–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ —É–¥–∞–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ `_remove_*_reply_keyboard()`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:
- ‚úÖ **–ö–Ω–æ–ø–∫–∏ Reply Keyboard**: –î–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –ø—Ä–µ–∂–¥–µ
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π**: –î–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä**: –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–æ–º–∞–Ω–¥

## üìã –†–µ–∑—É–ª—å—Ç–∞—Ç

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- ‚úÖ **–ò—Å—á–µ–∑–∞—é—â–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –¢–µ–ø–µ—Ä—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ —á–∞—Ç–µ
- ‚úÖ **–ù–µ—É–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–ø–æ–∫–æ–π–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ**: –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –±–æ–ª—å—à–µ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –£–ª—É—á—à–µ–Ω–∏—è UX:
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –æ—Å—Ç–∞—é—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ –¥—Ä—É–≥—É—é –∫–æ–º–∞–Ω–¥—É
- **–£–¥–æ–±—Å—Ç–≤–æ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è
- **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å**: –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤–µ–¥—É—Ç —Å–µ–±—è –∫–∞–∫ –æ–∂–∏–¥–∞–µ—Ç—Å—è

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ **–í—Å–µ –∫–Ω–æ–ø–∫–∏**: –†–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥**: –ù–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å
- ‚úÖ **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ**: –ú–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

–ò–∑–º–µ–Ω–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é:
- ‚úÖ –ö–æ–¥ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ª–∏–Ω—Ç–µ—Ä–æ–º
- ‚úÖ –ù–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –£–ª—É—á—à–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ò–∑–º–µ–Ω–µ–Ω–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ
- –ó–∞–º–µ–Ω–µ–Ω–∞ —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤—Å—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä
- –£–ª—É—á—à–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- Ephemeral —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–û–±–Ω–æ–≤–ª—è—é –≥—Ä–∞—Ñ–∏–∫...")
