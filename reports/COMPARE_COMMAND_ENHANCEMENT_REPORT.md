# –û—Ç—á–µ—Ç –æ–± —É–ª—É—á—à–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã /compare

## üéØ –¶–µ–ª—å
–£–ª—É—á—à–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/compare` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–≤–æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã —Å –∫–ª—é—á–µ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ –≤ –ø–æ–¥–ø–∏—Å–∏ –∫ –≥—Ä–∞—Ñ–∏–∫—É –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_create_summary_metrics_table`
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 6784-6961
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–≤–æ–¥–Ω—É—é —Ç–∞–±–ª–∏—Ü—É —Å 4 –∫–ª—é—á–µ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏:
  - –°—Ä–µ–¥–Ω–µ–≥–æ–¥–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (CAGR)
  - –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
  - –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞
  - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞
- **–§–æ—Ä–º–∞—Ç**: Markdown —Ç–∞–±–ª–∏—Ü–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `tabulate`
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ `None` –∑–Ω–∞—á–µ–Ω–∏–π –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- **–§–∞–π–ª**: `services/chart_styles.py`, —Å—Ç—Ä–æ–∫–∏ 766-801
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
  - –°–∫—Ä—ã—Ç–∞ –ø–æ–¥–ø–∏—Å—å –æ—Å–∏ Y (`ylabel = ''`)
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –Ω–∞ –æ—Å–∏ X

### 3. –û–±–Ω–æ–≤–ª–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≥—Ä–∞—Ñ–∏–∫–∞
- **–§–∞–π–ª**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 3420-3427
- **–ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç**: `–°—Ä–∞–≤–Ω–µ–Ω–∏–µ A, B, C | –≤–∞–ª—é—Ç–∞ | –ø–µ—Ä–∏–æ–¥`
- **–ü—Ä–∏–º–µ—Ä**: `–°—Ä–∞–≤–Ω–µ–Ω–∏–µ SPY.US, QQQ.US | USD | 5Y`

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–¥–ø–∏—Å—å –∫ –≥—Ä–∞—Ñ–∏–∫—É
- **–§–∞–π–ª**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 3440-3446
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
  - –£–¥–∞–ª–µ–Ω–æ —Å—Ç–∞—Ä–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ–¥–ø–∏—Å–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –º–µ—Ç—Ä–∏–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown
  - –ó–∞–≥–æ–ª–æ–≤–æ–∫: `üìä **–°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫**`

### 5. –£—á–µ—Ç –ø–µ—Ä–∏–æ–¥–∞ –≤ —Ä–∞—Å—á–µ—Ç–µ –º–µ—Ç—Ä–∏–∫
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: –ü–µ—Ä–∏–æ–¥ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –≤ `AssetList`
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `first_date` –∏ `last_date` –≤ `AssetList`
- **–†–∞—Å—á–µ—Ç CAGR**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞–Ω–Ω—ã—Ö

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫
1. **CAGR**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `annual_return` –∏–∑ –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ —Ä—É—á–Ω–æ–π —Ä–∞—Å—á–µ—Ç –ø–æ —Ñ–æ—Ä–º—É–ª–µ `(1 + total_return)^(1/years) - 1`
2. **–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `volatility` –∏–∑ –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ —Ä—É—á–Ω–æ–π —Ä–∞—Å—á–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏
3. **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `sharpe` –∏–∑ –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ —Ä—É—á–Ω–æ–π —Ä–∞—Å—á–µ—Ç `(CAGR - risk_free_rate) / volatility`
4. **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `max_drawdown` –∏–∑ –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ —Ä—É—á–Ω–æ–π —Ä–∞—Å—á–µ—Ç —á–µ—Ä–µ–∑ `wealth_index`

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ –∞–∫—Ç–∏–≤–æ–≤, —Ç–∞–∫ –∏ –ø–æ—Ä—Ç—Ñ–µ–ª–µ–π
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö (`DataFrame`, `Series`)
- Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–æ—Ü–µ–Ω—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ 2 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ 2 –∑–Ω–∞–∫–æ–≤
- –ó–Ω–∞—á–µ–Ω–∏—è "N/A" –¥–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫

## üìä –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```
üìä **–°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫**

| –ú–µ—Ç—Ä–∏–∫–∞                        | SPY.US | QQQ.US |
|--------------------------------|--------|--------|
| –°—Ä–µ–¥–Ω–µ–≥–æ–¥–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (CAGR) | 10.25% | 12.45% |
| –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å                  | 15.30% | 18.75% |
| –ö–æ—ç—Ñ—Ñ. –®–∞—Ä–ø–∞                   | 0.67   | 0.56   |
| –ú–∞–∫—Å. –ø—Ä–æ—Å–∞–¥–∫–∞                 | -33.45%| -45.20%|
```

## üéØ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ü–µ–ª–∏
- ‚úÖ –£–¥–∞–ª–µ–Ω–æ —Ç–µ–∫—É—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ–¥–ø–∏—Å–∏ –∫ –≥—Ä–∞—Ñ–∏–∫—É
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –∫–ª—é—á–µ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
- ‚úÖ –°–∫—Ä—ã—Ç–∞ –ø–æ–¥–ø–∏—Å—å –æ—Å–∏ Y –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≥—Ä–∞—Ñ–∏–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ A, B, C | –≤–∞–ª—é—Ç–∞ | –ø–µ—Ä–∏–æ–¥"
- ‚úÖ –£—á—Ç–µ–Ω—ã –ø–µ—Ä–∏–æ–¥—ã –≤ —Ä–∞—Å—á–µ—Ç–µ –º–µ—Ç—Ä–∏–∫
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Ñ–æ—Ä–º–∞—Ç Markdown —Å `tabulate`

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º–∏:
- `/compare SPY.US QQQ.US`
- `/compare SPY.US QQQ.US 5Y`
- `/compare PORTFOLIO_1 SPY.US`
- `/compare SPY.US QQQ.US EUR`

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–Ω–æ–ø–æ–∫ –∞–Ω–∞–ª–∏–∑–∞
- –£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –≤—ã–≤–æ–¥–∞
- –ö–æ–¥ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
