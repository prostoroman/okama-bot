# –û—Ç—á–µ—Ç –æ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –º–µ—Ç—Ä–∏–∫ –≤ –∫–æ–º–∞–Ω–¥–µ /compare

## üéØ –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤ –∫–æ–º–∞–Ω–¥–µ `/compare` –¥–ª—è AI –∞–Ω–∞–ª–∏–∑–∞ —á–µ—Ä–µ–∑ Gemini –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ç–∞ –∂–µ —Ç–∞–±–ª–∏—Ü–∞ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏, —á—Ç–æ –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ –∫–Ω–æ–ø–∫–µ "–ú–µ—Ç—Ä–∏–∫–∏".

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û

**–¢–∞–±–ª–∏—Ü—ã –º–µ—Ç—Ä–∏–∫ –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–æ–π "–ú–µ—Ç—Ä–∏–∫–∏" –∏ AI –∞–Ω–∞–ª–∏–∑–æ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–Ω—ã.**

## üîç –ê–Ω–∞–ª–∏–∑ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### 1. –ö–Ω–æ–ø–∫–∞ "–ú–µ—Ç—Ä–∏–∫–∏" (`_handle_metrics_compare_button`)
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 6805-6852
- **–§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã**: `_create_summary_metrics_table()`
- **–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö**: `ok.AssetList(symbols, ccy=currency).describe()`
- **–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞**: Markdown —Ç–∞–±–ª–∏—Ü–∞ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏

### 2. AI –∞–Ω–∞–ª–∏–∑ (`_handle_data_analysis_compare_button`)
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 6648-6725
- **–§—É–Ω–∫—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö**: `_prepare_data_for_analysis()`
- **–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö**: –¢–∞ –∂–µ —Ñ—É–Ω–∫—Ü–∏—è `_create_summary_metrics_table()`
- **–ü–µ—Ä–µ–¥–∞—á–∞ –≤ Gemini**: –ß–µ—Ä–µ–∑ –ø–æ–ª–µ `summary_metrics_table`

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ –º–µ—Ç—Ä–∏–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç:
1. **–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ okama.describe()**:
   - Compound return (YTD)
   - CAGR (1, 5, 10 –ª–µ—Ç –∏ –ø–æ–ª–Ω—ã–π –ø–µ—Ä–∏–æ–¥)
   - Annualized mean return
   - Dividend yield (LTM)
   - Risk (–≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å)
   - CVAR
   - Max drawdowns
   - –î–∞—Ç—ã –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Å–∞–¥–æ–∫
   - –î–∞—Ç—ã –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

2. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:
   - Risk free rate (–±–µ–∑—Ä–∏—Å–∫–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞)
   - Sharpe Ratio (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞)
   - Sortino Ratio (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –°–æ—Ä—Ç–∏–Ω–æ)
   - Calmar Ratio (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ö–∞–ª–º–∞—Ä–∞)

### –ü—Ä–∏–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è SPY.US –∏ QQQ.US:
```
| –ú–µ—Ç—Ä–∏–∫–∞                                     | SPY.US   | QQQ.US   |
|:--------------------------------------------|:---------|:---------|
| Compound return (YTD)                       | 10.71%   | 11.86%   |
| CAGR (1 years)                              | 15.85%   | 20.43%   |
| CAGR (5 years)                              | 14.68%   | 14.81%   |
| CAGR (10 years)                             | 14.50%   | 19.43%   |
| CAGR (26 years, 5 months)                   | 8.19%    | 10.14%   |
| Annualized mean return (26 years, 5 months) | 9.44%    | 13.20%   |
| Dividend yield (LTM)                        | 1.11%    | 0.49%    |
| Risk (26 years, 5 months)                   | 16.56%   | 26.47%   |
| CVAR (26 years, 5 months)                   | 0.3948   | 0.6353   |
| Max drawdowns (26 years, 5 months)          | -50.78%  | -81.08%  |
| Max drawdowns dates (26 years, 5 months)    | 2009-02  | 2002-09  |
| Inception date                              | 1993-02  | 1999-04  |
| Last asset date                             | 2025-09  | 2025-09  |
| Common last data date                       | 2025-08  | 2025-08  |
| Risk free rate                              | 4.69%    | 4.69%    |
| Sharpe Ratio                                | N/A      | N/A      |
| Sortino Ratio                               | -0.436   | -0.216   |
| Calmar Ratio                                | N/A      | N/A      |
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
- **–§–∞–π–ª**: `tests/test_compare_metrics_consistency.py`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã –º–µ—Ç—Ä–∏–∫ –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–æ–π "–ú–µ—Ç—Ä–∏–∫–∏" –∏ AI –∞–Ω–∞–ª–∏–∑–æ–º
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –¢–∞–±–ª–∏—Ü—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–Ω—ã

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:
1. **–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö**: –û–±–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `ok.AssetList.describe()`
2. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û–¥–∏–Ω–∞–∫–æ–≤–æ–µ markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
3. **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ**: –ò–¥–µ–Ω—Ç–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫
4. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: –û–¥–∏–Ω–∞–∫–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã

## üìà –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ AI –∞–Ω–∞–ª–∏–∑–µ

–ü–æ–º–∏–º–æ —Ç–∞–±–ª–∏—Ü—ã –º–µ—Ç—Ä–∏–∫, –≤ AI –∞–Ω–∞–ª–∏–∑ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

### Performance metrics:
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–∏–≤–∞
- CAGR, –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –®–∞—Ä–ø–∞, –°–æ—Ä—Ç–∏–Ω–æ, –ö–∞–ª–º–∞—Ä–∞
- VaR –∏ CVaR

### Asset information:
- –ù–∞–∑–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "SPDR S&P 500 ETF Trust")
- –°—Ç—Ä–∞–Ω–∞, –±–∏—Ä–∂–∞, –≤–∞–ª—é—Ç–∞
- –¢–∏–ø –∞–∫—Ç–∏–≤–∞

### Correlation data:
- –ú–∞—Ç—Ä–∏—Ü–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–∞–º–∏
- –î–∞–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –≥—Ä–∞–Ω–∏—Ü—ã

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§—É–Ω–∫—Ü–∏—è `_create_summary_metrics_table`:
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 7997-8062
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç**: `ok.AssetList.describe()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–∞–∑–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫
- **–î–æ–±–∞–≤–ª—è–µ—Ç**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (Sharpe, Sortino, Calmar)
- **–§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç**: Markdown —Ç–∞–±–ª–∏—Ü—É —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ–º

### –§—É–Ω–∫—Ü–∏—è `_prepare_data_for_analysis`:
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 7120-7762
- **–í—ã–∑—ã–≤–∞–µ—Ç**: `_create_summary_metrics_table()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã
- **–ü–µ—Ä–µ–¥–∞–µ—Ç**: –¢–∞–±–ª–∏—Ü—É –≤ –ø–æ–ª–µ `summary_metrics_table`
- **–î–æ–ø–æ–ª–Ω—è–µ—Ç**: –î–µ—Ç–∞–ª—å–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∞, —á—Ç–æ –≤ –∫–æ–º–∞–Ω–¥–µ `/compare`:**

1. ‚úÖ **–ö–Ω–æ–ø–∫–∞ "–ú–µ—Ç—Ä–∏–∫–∏"** –∏ **AI –∞–Ω–∞–ª–∏–∑** –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ**
2. ‚úÖ **–¢–∞–±–ª–∏—Ü–∞ –º–µ—Ç—Ä–∏–∫** –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ Gemini **–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π**
3. ‚úÖ **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –∏ **—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ** –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–Ω—ã
4. ‚úÖ **–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö** - –µ–¥–∏–Ω—ã–π `ok.AssetList.describe()`

**AI –∞–Ω–∞–ª–∏–∑ –ø–æ–ª—É—á–∞–µ—Ç —Ç—É –∂–µ —Ç–∞–±–ª–∏—Ü—É –º–µ—Ç—Ä–∏–∫, —á—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –ø–ª—é—Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.**

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞** - –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
2. **–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç** –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è
3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 14 —Å–µ–Ω—Ç—è–±—Ä—è 2025*  
*–°—Ç–∞—Ç—É—Å: ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ*
