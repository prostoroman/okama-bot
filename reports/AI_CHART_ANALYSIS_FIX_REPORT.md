# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ AI –∞–Ω–∞–ª–∏–∑–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –ø—Ä–∏ —Å–º–µ—à–∞–Ω–Ω–æ–º —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ AI –∞–Ω–∞–ª–∏–∑–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –ø—Ä–∏ —Å–º–µ—à–∞–Ω–Ω–æ–º —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ –ø–æ—Ä—Ç—Ñ–µ–ª–µ–π –≤–æ–∑–Ω–∏–∫–∞–ª–∏ —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è**: –ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è `portfolio_7316.PF` –≤ –æ—Ç–≤–µ—Ç–µ AI –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å –Ω–∞–∑–≤–∞–Ω–∏–µ `8906.PF`, —á—Ç–æ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–º—É –ø–æ—Ä—Ç—Ñ–µ–ª—é.

2. **–õ–∏—à–Ω—è—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏**: –í —Å–æ–æ–±—â–µ–Ω–∏–∏ AI –∞–Ω–∞–ª–∏–∑–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –ª–∏—à–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏:
   - üîç **–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–µ –∞–∫—Ç–∏–≤—ã**: portfolio_7316.PF (AAPL.US, MSFT.US, TSLA.US, AGG.US), sber.MOEX
   - üí∞ **–í–∞–ª—é—Ç–∞**: USD
   - üìÖ **–ü–µ—Ä–∏–æ–¥**: –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –¥–∞–Ω–Ω—ã—Ö

3. **–ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–ª—è—Ü–∏–∏**: AI –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª –∏–Ω—Ñ–ª—è—Ü–∏—é (USD.INFL), —Ö–æ—Ç—è –Ω—É–∂–Ω–æ –±—ã–ª–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º—ã–µ –∞–∫—Ç–∏–≤—ã.

## –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª—è

**–§–∞–π–ª**: `bot.py` (—Å—Ç—Ä–æ–∫–∏ 5956-5970)

**–ü—Ä–æ–±–ª–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `display_symbols[i]`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∞–ª –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å —Å–æ—Å—Ç–∞–≤–æ–º –∞–∫—Ç–∏–≤–æ–≤.

**–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª—è –∏–∑ `portfolio_contexts`:

```python
# Use proper portfolio names from portfolio_contexts
proper_asset_names = []
for i, symbol in enumerate(symbols):
    if i < len(portfolio_contexts):
        pctx = portfolio_contexts[i]
        if 'original_portfolio_symbol' in pctx:
            # This is a portfolio - use original portfolio symbol
            proper_asset_names.append(pctx['original_portfolio_symbol'])
        else:
            # This is a regular asset
            proper_asset_names.append(symbol)
    else:
        proper_asset_names.append(symbol)

analysis_text += f"üîç **–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–µ –∞–∫—Ç–∏–≤—ã:** {', '.join(proper_asset_names)}"
```

### 2. –£–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

**–§–∞–π–ª**: `bot.py` (—Å—Ç—Ä–æ–∫–∏ 5956-5970)

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ**: –£–±—Ä–∞–Ω—ã —Å—Ç—Ä–æ–∫–∏ —Å –≤–∞–ª—é—Ç–æ–π –∏ –ø–µ—Ä–∏–æ–¥–æ–º –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è AI –∞–Ω–∞–ª–∏–∑–∞. –¢–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã—Ö –∞–∫—Ç–∏–≤–æ–≤ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏.

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI

**–§–∞–π–ª**: `services/gemini_service.py` (—Å—Ç—Ä–æ–∫–∏ 87-94)

**–î–æ–±–∞–≤–ª–µ–Ω–æ**: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è AI –Ω–µ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–ª—è—Ü–∏—é:

```python
prompt = """–¢—ã ‚Äî –ò–ò-—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫, —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–≤—à–∏—Å—å –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö —Ç—Ä–µ–Ω–¥–∞—Ö –∏ –º–µ—Ç—Ä–∏–∫–∞—Ö. 
–û–ø–∏—à–∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞, —É–∫–∞–∑–∞–≤ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–µ—Ä–∏–æ–¥, –ø–æ–∫–∞–∑–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —Ü–µ–Ω–æ–≤—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è. 
–ó–∞–≤–µ—Ä—à–∏ –∫—Ä–∞—Ç–∫–∏–º —Ä–µ–∑—é–º–µ –æ–±—â–µ–≥–æ —Ä—ã–Ω–æ—á–Ω–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –∏–ª–∏ –∫–ª—é—á–µ–≤—ã–º –≤—ã–≤–æ–¥–æ–º. 
–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –Ω–∏–∫–∞–∫–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–ª–∏ –Ω—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤. 
–ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å –æ–¥–∏–Ω –∞–±–∑–∞—Ü –Ω–µ –±–æ–ª–µ–µ –ø—è—Ç–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π. 
–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä—è–º—ã–º –∞–Ω–∞–ª–∏–∑–æ–º –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –æ–≥–æ–≤–æ—Ä–æ–∫ –∏–ª–∏ —Å–ø–µ–∫—É–ª—è—Ç–∏–≤–Ω—ã—Ö —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫.
–í–ê–ñ–ù–û: –ù–µ –∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –∏–Ω—Ñ–ª—è—Ü–∏—é (USD.INFL, EUR.INFL –∏ —Ç.–¥.) - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç–æ–ª—å–∫–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º—ã–µ –∞–∫—Ç–∏–≤—ã."""
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:

1. ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è**: AI –∞–Ω–∞–ª–∏–∑ —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `portfolio_7316.PF` –≤–º–µ—Å—Ç–æ `8906.PF`).

2. ‚úÖ **–ß–∏—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**: –£–±—Ä–∞–Ω–∞ –ª–∏—à–Ω—è—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞–ª—é—Ç–µ –∏ –ø–µ—Ä–∏–æ–¥–µ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è AI –∞–Ω–∞–ª–∏–∑–∞.

3. ‚úÖ **–§–æ–∫—É—Å –Ω–∞ –∞–∫—Ç–∏–≤—ã**: AI –±–æ–ª—å—à–µ –Ω–µ –∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ—Ç –∏–Ω—Ñ–ª—è—Ü–∏—é, –∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º—ã–µ –∞–∫—Ç–∏–≤—ã.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ—Ä—Ç—Ñ–µ–ª—å –∫–æ–º–∞–Ω–¥–æ–π `/portfolio`
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –∏ –∑–∞–ø–æ–º–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `portfolio_7316.PF`)
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–º–µ—à–∞–Ω–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ: `/compare portfolio_7316.PF SBER.MOEX USD.INFL`
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "ü§ñ AI –∞–Ω–∞–ª–∏–∑ –≥—Ä–∞—Ñ–∏–∫–∞"
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –æ—Ç–≤–µ—Ç–µ:
   - –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–º—É
   - –ù–µ—Ç –ª–∏—à–Ω–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–∞–ª—é—Ç–µ –∏ –ø–µ—Ä–∏–æ–¥–µ
   - AI –Ω–µ –∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ—Ç –∏–Ω—Ñ–ª—è—Ü–∏—é

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

- `bot.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –∞–∫—Ç–∏–≤–æ–≤ –≤ AI –∞–Ω–∞–ª–∏–∑–µ
- `services/gemini_service.py` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è AI

## –î–∞—Ç–∞

2024-12-19
