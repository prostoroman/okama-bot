# –û—Ç—á–µ—Ç –æ–± —É–ª—É—á—à–µ–Ω–∏–∏ –∫–Ω–æ–ø–∫–∏ –ú–µ—Ç—Ä–∏–∫–∏ –≤ –∫–æ–º–∞–Ω–¥–µ /compare

## üéØ –¶–µ–ª—å
–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "Metrics" –≤ "–ú–µ—Ç—Ä–∏–∫–∏", –∏–∑–º–µ–Ω–∏—Ç—å –µ–µ –ª–æ–≥–∏–∫—É –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ç–∞–±–ª–∏—Ü—ã –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫, –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ —É–ª—É—á—à–∏—Ç—å –ø–æ–¥–ø–∏—Å—å –∫ –≥—Ä–∞—Ñ–∏–∫—É –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ Metrics –≤ –ú–µ—Ç—Ä–∏–∫–∏
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 7433 –∏ 3748
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: 
  - –í —Ñ—É–Ω–∫—Ü–∏–∏ `_create_compare_command_keyboard`: `"üìä Metrics"` ‚Üí `"üìä –ú–µ—Ç—Ä–∏–∫–∏"`
  - –í –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–µ –∫–æ–º–∞–Ω–¥—ã `/compare`: `"üìä Metrics"` ‚Üí `"üìä –ú–µ—Ç—Ä–∏–∫–∏"`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö–Ω–æ–ø–∫–∞ —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

### 2. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∫–Ω–æ–ø–∫–∏ –ú–µ—Ç—Ä–∏–∫–∏
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 6185-6231
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
  - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_handle_metrics_compare_button`
  - –£–¥–∞–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ Excel —Ñ–∞–π–ª–∞
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–∞–±–ª–∏—Ü—ã –º–µ—Ç—Ä–∏–∫ –≤ –≤–∏–¥–µ —Å–æ–æ–±—â–µ–Ω–∏—è
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `_create_summary_metrics_table` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö–Ω–æ–ø–∫–∞ —Ç–µ–ø–µ—Ä—å –≤—ã–≤–æ–¥–∏—Ç —Ç–∞–±–ª–∏—Ü—É –º–µ—Ç—Ä–∏–∫ –≤ —á–∞—Ç –≤–º–µ—Å—Ç–æ Excel —Ñ–∞–π–ª–∞

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ –≤ —Ç–∞–±–ª–∏—Ü—É
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 7310-7352 (—Ä–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫) –∏ 7401-7439 (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ)
- **–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:
  - **–ö–æ—ç—Ñ. –°–æ—Ä—Ç–∏–Ω–æ**: –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –°–æ—Ä—Ç–∏–Ω–æ (–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∫ downside deviation)
  - **–ö–æ—ç—Ñ. –ö–∞–ª—å–º–∞—Ä–∞**: –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ö–∞–ª—å–º–∞—Ä–∞ (–æ—Ç–Ω–æ—à–µ–Ω–∏–µ CAGR –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ—Å–∞–¥–∫–µ)
  - **VaR 95%**: Value at Risk –Ω–∞ —É—Ä–æ–≤–Ω–µ 95% (5-–π –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏)
  - **CVaR 95%**: Conditional Value at Risk –Ω–∞ —É—Ä–æ–≤–Ω–µ 95% (–æ–∂–∏–¥–∞–µ–º–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –Ω–∏–∂–µ VaR 95%)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¢–∞–±–ª–∏—Ü–∞ —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç 8 –º–µ—Ç—Ä–∏–∫ –≤–º–µ—Å—Ç–æ 4

### 4. –£–¥–∞–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –º–µ—Ç—Ä–∏–∫ –∏–∑ –º–µ—Å—Ç–∞ –ø–æ—Å–ª–µ –≥—Ä–∞—Ñ–∏–∫–∞
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 3796-3798
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –£–¥–∞–ª–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –º–µ—Ç—Ä–∏–∫ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ –≥—Ä–∞—Ñ–∏–∫–∞
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¢–∞–±–ª–∏—Ü–∞ –º–µ—Ç—Ä–∏–∫ —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "–ú–µ—Ç—Ä–∏–∫–∏"

### 5. –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏ –∫ –≥—Ä–∞—Ñ–∏–∫—É –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 7525-7564
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
  - –§—É–Ω–∫—Ü–∏—è `_create_enhanced_chart_caption` —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `display_symbols`
  - –ê–∫—Ç–∏–≤—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–∞ —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏ (‚Ä¢) –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
  - –ö–∞–∂–¥—ã–π –∞–∫—Ç–∏–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å –ø–æ–ª–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä: "SPY.US (SPDR S&P 500 ETF Trust)")
  - –ü–µ—Ä–∏–æ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–æ–¥–ø–∏—Å—å, –µ—Å–ª–∏ –æ–Ω –∑–∞–¥–∞–Ω
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–¥–ø–∏—Å—å —Å—Ç–∞–ª–∞ –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–π –∏ —á–∏—Ç–∞–µ–º–æ–π

### 6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∏
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 3715-3717
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `display_symbols` –≤ —Ñ—É–Ω–∫—Ü–∏—é `_create_enhanced_chart_caption`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–¥–ø–∏—Å—å –≥—Ä–∞—Ñ–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–æ–≤

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã –º–µ—Ç—Ä–∏–∫

–¢–∞–±–ª–∏—Ü–∞ —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏:

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| –°—Ä–µ–¥–Ω–µ–≥–æ–¥–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (CAGR) | –°—Ä–µ–¥–Ω–µ–≥–æ–¥–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∑–∞ –≤–µ—Å—å –ø–µ—Ä–∏–æ–¥ |
| –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ |
| –ö–æ—ç—Ñ—Ñ. –®–∞—Ä–ø–∞ | –û—Ç–Ω–æ—à–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∫ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ |
| –ú–∞–∫—Å. –ø—Ä–æ—Å–∞–¥–∫–∞ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ –æ—Ç –ø–∏–∫–∞ |
| –ö–æ—ç—Ñ. –°–æ—Ä—Ç–∏–Ω–æ | –û—Ç–Ω–æ—à–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∫ downside deviation |
| –ö–æ—ç—Ñ. –ö–∞–ª—å–º–∞—Ä–∞ | –û—Ç–Ω–æ—à–µ–Ω–∏–µ CAGR –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ—Å–∞–¥–∫–µ |
| VaR 95% | Value at Risk –Ω–∞ —É—Ä–æ–≤–Ω–µ 95% |
| CVaR 95% | Conditional Value at Risk –Ω–∞ —É—Ä–æ–≤–Ω–µ 95% |

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –†–∞—Å—á–µ—Ç –Ω–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫:
- **Sortino Ratio**: `(CAGR - risk_free_rate) / downside_deviation`
- **Calmar Ratio**: `CAGR / abs(max_drawdown)`
- **VaR 95%**: `returns.quantile(0.05)`
- **CVaR 95%**: `returns[returns <= var_95].mean()`

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Telegram
- –ê–∫—Ç–∏–≤—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å–ø–∏—Å–∫–æ–º —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏
- –ü–µ—Ä–∏–æ–¥ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –≤ "–ú–µ—Ç—Ä–∏–∫–∏"
- ‚úÖ –õ–æ–≥–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ –≤—ã–≤–æ–¥ —Ç–∞–±–ª–∏—Ü—ã –º–µ—Ç—Ä–∏–∫
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –∏–∑ –º–µ—Å—Ç–∞ –ø–æ—Å–ª–µ –≥—Ä–∞—Ñ–∏–∫–∞ –≤ –∫–Ω–æ–ø–∫—É
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏: –ö–æ—ç—Ñ. –°–æ—Ä—Ç–∏–Ω–æ, –ö–æ—ç—Ñ. –ö–∞–ª—å–º–∞—Ä–∞, VaR 95%, CVaR 95%
- ‚úÖ –õ–æ–≥–∏–∫–∞ –≤—ã–≥—Ä—É–∑–∫–∏ –≤ Excel —É–¥–∞–ª–µ–Ω–∞
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –ø–æ–¥–ø–∏—Å—å –∫ –≥—Ä–∞—Ñ–∏–∫—É
- ‚úÖ –ü–µ—Ä–∏–æ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø–æ–¥–ø–∏—Å—å (–µ—Å–ª–∏ –∑–∞–¥–∞–Ω)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞—é—Ç –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –º–µ—Ç—Ä–∏–∫ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "–ú–µ—Ç—Ä–∏–∫–∏" –∏ —É–ª—É—á—à–µ–Ω–Ω—É—é –ø–æ–¥–ø–∏—Å—å –∫ –≥—Ä–∞—Ñ–∏–∫—É —Å –ø–æ–ª–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∞–∫—Ç–∏–≤–æ–≤.
