# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ data_source

## –ü—Ä–æ–±–ª–µ–º–∞

**–û—à–∏–±–∫–∞**: `Figure.set() got an unexpected keyword argument 'data_source'`

**–õ–æ–≥ –æ—à–∏–±–∫–∏**:
```
2025-09-11 21:58:16,872 - INFO - Using CJK font: DejaVu Sans
2025-09-11 21:58:16,872 - ERROR - Error creating chart: Figure.set() got an unexpected keyword argument 'data_source'
```

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏

–ü–∞—Ä–∞–º–µ—Ç—Ä `data_source` –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è —á–µ—Ä–µ–∑ —Ü–µ–ø–æ—á–∫—É –≤—ã–∑–æ–≤–æ–≤ –º–µ—Ç–æ–¥–æ–≤ —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤, –Ω–æ –Ω–µ –±—ã–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –≤ –º–µ—Ç–æ–¥–µ `create_chart()`.

**–¶–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–æ–≤**:
1. `create_price_chart(data, symbol, currency, period, data_source='okama')`
2. `create_line_chart(data, title, ylabel, xlabel, data_source=data_source)`
3. `create_chart(**kwargs)` - –∑–¥–µ—Å—å –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞

### –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã

–í –º–µ—Ç–æ–¥–µ `create_chart()` –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–ª–∏—Å—å –¥–ª—è `plt.subplots()`, –Ω–æ `data_source` –Ω–µ –±—ã–ª –≤–∫–ª—é—á–µ–Ω –≤ —Å–ø–∏—Å–æ–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π:

```python
# –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
plot_kwargs = {k: v for k, v in kwargs.items() if k not in ['copyright', 'title', 'xlabel', 'ylabel']}
```

–ö–æ–≥–¥–∞ `data_source` –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –≤ `plt.subplots()`, –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.

## –†–µ—à–µ–Ω–∏–µ

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ ChartStyles

**–§–∞–π–ª**: `services/chart_styles.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ**:
```python
# –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
plot_kwargs = {k: v for k, v in kwargs.items() if k not in ['copyright', 'title', 'xlabel', 'ylabel', 'data_source']}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–∞—Ä–∞–º–µ—Ç—Ä `data_source` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `plt.subplots()`.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```python
# –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º data_source
chart_styles = ChartStyles()
fig, ax = chart_styles.create_price_chart(data, 'TEST.SYMBOL', 'USD', '1Y', data_source='okama')
# ‚úÖ –£—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
```

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

1. ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤**: –ë–µ–∑ –æ—à–∏–±–æ–∫ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `data_source`
2. ‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. ‚úÖ **–ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**: `data_source` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ü–µ–ø–æ—á–∫—É –º–µ—Ç–æ–¥–æ–≤

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ
**–ö–æ–º–º–∏—Ç**: `77f37d3`
**–í—Ä–µ–º—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è**: 2-3 –º–∏–Ω—É—Ç—ã

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –≤—Å–µ –º–µ—Ç–æ–¥—ã —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `data_source`:

- ‚úÖ `create_price_chart()` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `data_source`
- ‚úÖ `create_line_chart()` - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç `data_source`
- ‚úÖ `create_chart()` - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç `data_source` –∏–∑ `plt.subplots()`
- ‚úÖ `apply_styling()` - –ø–æ–ª—É—á–∞–µ—Ç `data_source` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

## –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

1. **–ì—Ä–∞—Ñ–∏–∫–∏ Okama**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç `data_source='okama'`
2. **–ì—Ä–∞—Ñ–∏–∫–∏ Tushare**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç `data_source='tushare'`
3. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

**–°—Ç–∞—Ç—É—Å**: üöÄ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –û—à–∏–±–∫–∞ `data_source` —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞
