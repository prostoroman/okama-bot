# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π –º–µ—Ç—Ä–∏–∫ –ø–æ—Ä—Ç—Ñ–µ–ª—è

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–í —Ç–∞–±–ª–∏—Ü–µ –º–µ—Ç—Ä–∏–∫ –ø–æ—Ä—Ç—Ñ–µ–ª—è –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –Ω–∞–∑–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –≤–º–µ—Å—Ç–æ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π:

```
| –ú–µ—Ç—Ä–∏–∫–∞                                     | –ó–Ω–∞—á–µ–Ω–∏–µ               |
|:--------------------------------------------|:-----------------------|
| compound return (YTD)                       | compound return        |
| CAGR (1 years)                              | CAGR                   |
| CAGR (5 years)                              | CAGR                   |
| CAGR (10 years)                             | CAGR                   |
| CAGR (19 years, 0 months)                   | CAGR                   |
| Annualized mean return (19 years, 0 months) | Annualized mean return |
| Dividend yield (LTM)                        | Dividend yield         |
| Risk (19 years, 0 months)                   | Risk                   |
| CVAR (19 years, 0 months)                   | CVAR                   |
| Max drawdown (19 years, 0 months)           | Max drawdown           |
| Max drawdown date (19 years, 0 months)      | Max drawdown date      |
| Risk free rate                              | 10.00%                 |
| Sharpe Ratio                                | N/A                    |
| Sortino Ratio                               | N/A                    |
| Calmar Ratio                                | N/A                    |
```

## üîç –ü—Ä–∏—á–∏–Ω–∞

–ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–∫–ª—é—á–∞–ª–∞—Å—å –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ `portfolio.describe()`. 

### –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ `portfolio.describe()`**:
```
                  property              period portfolio_5135.PF  inflation
0          compound return                 YTD          0.092431   0.039488
1                     CAGR             1 years          0.226488   0.081448
2                     CAGR             5 years          0.175723   0.086176
3                     CAGR            10 years          0.225373   0.063923
4                     CAGR  19 years, 0 months          0.148406   0.078112
5   Annualized mean return  19 years, 0 months          0.208482        NaN
6           Dividend yield                 LTM          0.067322        NaN
7                     Risk  19 years, 0 months          0.387717        NaN
8                     CVAR  19 years, 0 months          0.693778        NaN
9             Max drawdown  19 years, 0 months         -0.753973        NaN
10       Max drawdown date  19 years, 0 months           2009-02        NaN
```

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥**:
```python
# –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø–µ—Ä–≤—É—é –∫–æ–ª–æ–Ω–∫—É
value = describe_data.iloc[idx, 0]  # –≠—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–ª–æ 'property' (–Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏)
```

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥**:
```python
# –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –Ω–∞—Ö–æ–¥–∏–º –∫–æ–ª–æ–Ω–∫—É –ø–æ—Ä—Ç—Ñ–µ–ª—è
portfolio_column = None
for col in describe_data.columns:
    if col.startswith('portfolio_') and col.endswith('.PF'):
        portfolio_column = col
        break

if portfolio_column:
    value = describe_data.loc[idx, portfolio_column]  # –≠—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
```

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_create_portfolio_summary_metrics_table`

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 8241-8256

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
```python
# –°—Ç–∞—Ä—ã–π –∫–æ–¥ (–ü–†–û–ë–õ–ï–ú–ù–´–ô)
value = describe_data.iloc[idx, 0]  # First (and only) column

# –ù–æ–≤—ã–π –∫–æ–¥ (–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô)
# Get value from describe data - find the portfolio column
portfolio_column = None
for col in describe_data.columns:
    if col.startswith('portfolio_') and col.endswith('.PF'):
        portfolio_column = col
        break

if portfolio_column:
    value = describe_data.loc[idx, portfolio_column]
else:
    # Fallback: use first non-property, non-period column
    value_cols = [col for col in describe_data.columns if col not in ['property', 'period', 'inflation']]
    if value_cols:
        value = describe_data.loc[idx, value_cols[0]]
    else:
        value = None
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫

#### `_add_portfolio_sharpe_ratio_row`
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 8314-8331

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ –∫–æ–ª–æ–Ω–∫–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π CAGR –∏ Risk
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–µ—Ä–∏–æ–¥—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –º–µ—Ç—Ä–∏–∫

#### `_add_portfolio_sortino_ratio_row`
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 8367-8380

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ –∫–æ–ª–æ–Ω–∫–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è CAGR

#### `_add_portfolio_calmar_ratio_row`
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 8411-8428

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ –∫–æ–ª–æ–Ω–∫–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π CAGR –∏ Max drawdown
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–µ—Ä–∏–æ–¥—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –º–µ—Ç—Ä–∏–∫

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
| CAGR (5 years)                              | CAGR                   |
| Risk (19 years, 0 months)                   | Risk                   |
| Sharpe Ratio                                | N/A                    |
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
| CAGR (5 years)                              | 17.57%                 |
| Risk (19 years, 0 months)                   | 38.77%                 |
| Sharpe Ratio                                | 0.195                  |
```

### –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –º–µ—Ç—Ä–∏–∫:
```
| –ú–µ—Ç—Ä–∏–∫–∞                                     | –ó–Ω–∞—á–µ–Ω–∏–µ   |
|:--------------------------------------------|:-----------|
| compound return (YTD)                       | 9.24%      |
| CAGR (1 years)                              | 22.65%     |
| CAGR (5 years)                              | 17.57%     |
| CAGR (10 years)                             | 22.54%     |
| CAGR (19 years, 0 months)                   | 14.84%     |
| Annualized mean return (19 years, 0 months) | 20.85%     |
| Dividend yield (LTM)                        | 6.73%      |
| Risk (19 years, 0 months)                   | 38.77%     |
| CVAR (19 years, 0 months)                   | 0.6938     |
| Max drawdown (19 years, 0 months)           | -75.40%    |
| Max drawdown date (19 years, 0 months)      | 2009-02    |
| Risk free rate                              | 10.00%     |
| Sharpe Ratio                                | 0.195      |
| Sortino Ratio                               | 0.314      |
| Calmar Ratio                                | 0.233      |
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç `test_portfolio_metrics_values_fix.py`

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã**:
1. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–π**: –ó–Ω–∞—á–µ–Ω–∏—è –Ω–µ —Ä–∞–≤–Ω—ã –Ω–∞–∑–≤–∞–Ω–∏—è–º –º–µ—Ç—Ä–∏–∫
2. **–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö**: –ó–Ω–∞—á–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞—Ç —á–∏—Å–ª–∞, –ø—Ä–æ—Ü–µ–Ω—Ç—ã –∏–ª–∏ N/A
3. **–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**:
```
‚úÖ compound return (YTD): 9.24%
‚úÖ CAGR (5 years): 17.57%
‚úÖ Risk (19 years, 0 months): 38.77%
‚úÖ Max drawdown (19 years, 0 months): -75.40%
‚úÖ Risk free rate: 10.00%
‚úÖ Sharpe Ratio: 0.195
‚úÖ –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
‚úÖ –ó–Ω–∞—á–µ–Ω–∏—è –Ω–µ —Ä–∞–≤–Ω—ã –Ω–∞–∑–≤–∞–Ω–∏—è–º –º–µ—Ç—Ä–∏–∫
‚úÖ –ó–Ω–∞—á–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞—Ç —á–∏—Å–ª–∞, –ø—Ä–æ—Ü–µ–Ω—Ç—ã –∏–ª–∏ N/A
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞ –∫–æ–ª–æ–Ω–∫–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è

1. **–ü–æ–∏—Å–∫ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É**: `col.startswith('portfolio_') and col.endswith('.PF')`
2. **Fallback**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏, –Ω–µ —è–≤–ª—è—é—â–µ–π—Å—è 'property', 'period' –∏–ª–∏ 'inflation'
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: Graceful handling –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π

- **–ü—Ä–æ—Ü–µ–Ω—Ç—ã**: `f"{value*100:.2f}%"` –¥–ª—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏, –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏, –ø—Ä–æ—Å–∞–¥–æ–∫
- **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã**: `f"{value:.3f}"` –¥–ª—è Sharpe, Sortino, Calmar
- **–û–±—ã—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è**: `f"{value:.4f}"` –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
- **–î–∞—Ç—ã**: –ü—Ä—è–º–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –¥–∞—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Å–∞–¥–æ–∫

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–∏–æ–¥–æ–≤

- **CAGR**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥ "5 years" –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤
- **Risk/Max drawdown**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π –ø–µ—Ä–∏–æ–¥ "19 years, 0 months"
- **–ì–∏–±–∫–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø–µ—Ä–∏–æ–¥–æ–≤

## üéØ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **–†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ `okama.portfolio.describe()`
- **–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –º–µ—Ç—Ä–∏–∫**: –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ okama + –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
- **–ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã**: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è Sharpe, Sortino, Calmar

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –§–æ—Ä–º–∞—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–º–∞–Ω–¥–µ `/compare`
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: Graceful handling –æ—à–∏–±–æ–∫ —Å fallback –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ —É—Å–ø–µ—à–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—É—Ç–µ–º:

1. **–ê–Ω–∞–ª–∏–∑–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö**: –ò–∑—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `portfolio.describe()`
2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π**: –ü–æ–∏—Å–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–ª–æ–Ω–∫–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π

–¢–µ–ø–µ—Ä—å —Ç–∞–±–ª–∏—Ü–∞ –º–µ—Ç—Ä–∏–∫ –ø–æ—Ä—Ç—Ñ–µ–ª—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç **—Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –∏–∑ `okama.portfolio.describe()` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –≤—Å–µ–º–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è **–ø–æ–ª–Ω—É—é –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** —Å –∫–æ–º–∞–Ω–¥–æ–π `/compare`.
