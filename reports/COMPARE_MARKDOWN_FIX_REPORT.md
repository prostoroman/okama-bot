# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Markdown –≤ –∫–æ–º–∞–Ω–¥–µ /compare

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∏ —Å RUB –≤–∞–ª—é—Ç–æ–π –≤ –∫–æ–º–∞–Ω–¥–µ `/compare`, –ø—Ä–æ–ø–∞–ª–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ markdown –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö —Å–ø—Ä–∞–≤–∫–∏ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –∫–æ–º–∞–Ω–¥—ã –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

## üîç –ü—Ä–∏—á–∏–Ω–∞

–ü—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ª–æ–≥–∏–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤ –∫–æ–º–∞–Ω–¥–µ `/compare`, –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `parse_mode='Markdown'` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `_send_message_safe` –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∫–∏.

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Markdown –≤ —Å–ø—Ä–∞–≤–∫–µ –∫–æ–º–∞–Ω–¥—ã /compare

**–§–∞–π–ª:** `bot.py` (—Å—Ç—Ä–æ–∫–∞ 2075)

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:**
```python
# –ë—ã–ª–æ:
await self._send_message_safe(update, help_text)

# –°—Ç–∞–ª–æ:
await self._send_message_safe(update, help_text, parse_mode='Markdown')
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è _handle_compare_input

**–§–∞–π–ª:** `bot.py` (—Å—Ç—Ä–æ–∫–∏ 3596-3632)

**–ü—Ä–æ–±–ª–µ–º–∞:** –§—É–Ω–∫—Ü–∏—è `_handle_compare_input` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É –ø–∞—Ä—Å–∏–Ω–≥–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∞ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é `_parse_currency_and_period`.

**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–π –∂–µ –ª–æ–≥–∏–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞, —á—Ç–æ –∏ –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ `/compare`:

```python
# –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞:
raw_args = self.clean_symbol(text.strip())
# ... —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ ...

# –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:
text_args = text.split()
symbols, specified_currency, specified_period = self._parse_currency_and_period(text_args)
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Markdown
- –°–æ–æ–±—â–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∞–Ω–¥—ã `/compare` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–∏–º–µ—Ä—ã —Å –æ–±—Ä–∞—Ç–Ω—ã–º–∏ –∫–∞–≤—ã—á–∫–∞–º–∏ (`SPY.US QQQ.US`) –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
- –§—É–Ω–∫—Ü–∏—è `_handle_compare_input` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –≤–∞–ª—é—Ç—ã –∏ –ø–µ—Ä–∏–æ–¥—ã
- –ö–æ–º–∞–Ω–¥—ã –≤–∏–¥–∞ "SBER.MOEX, LKOH.MOEX, RUB, 5Y" —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–æ–π `/compare` –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –≤–≤–æ–¥–æ–º

### ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤–≤–æ–¥–∞ (–∑–∞–ø—è—Ç—ã–µ, –ø—Ä–æ–±–µ–ª—ã) —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∞–ª—é—Ç—ã —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ö–æ–º–∞–Ω–¥–∞ /compare –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
```
/compare
```
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–ø—Ä–∞–≤–∫–∞ —Å markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### –¢–µ—Å—Ç 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥ —Å –≤–∞–ª—é—Ç–æ–π –∏ –ø–µ—Ä–∏–æ–¥–æ–º
```
/compare
SBER.MOEX, LKOH.MOEX, RUB, 5Y
```
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –≤–∞–ª—é—Ç–æ–π RUB –∏ –ø–µ—Ä–∏–æ–¥–æ–º 5 –ª–µ—Ç

### –¢–µ—Å—Ç 3: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥ –±–µ–∑ –≤–∞–ª—é—Ç—ã
```
/compare
SPY.US QQQ.US
```
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –≤–∞–ª—é—Ç—ã USD

## üìã –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **bot.py**
   - –°—Ç—Ä–æ–∫–∞ 2075: –î–æ–±–∞–≤–ª–µ–Ω `parse_mode='Markdown'` –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∞–Ω–¥—ã `/compare`
   - –°—Ç—Ä–æ–∫–∏ 3596-3632: –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_handle_compare_input` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `_parse_currency_and_period`

## üîÑ –°–≤—è–∑–∞–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–≠—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –±–æ–ª–µ–µ –∫—Ä—É–ø–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∏ —Å RUB –≤–∞–ª—é—Ç–æ–π:
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ "RUB is not in allowed assets namespaces"
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ markdown –≤ –∫–æ–º–∞–Ω–¥–µ `/compare`
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤–∞–ª—é—Ç –∏ –ø–µ—Ä–∏–æ–¥–æ–≤

## ‚úÖ –°—Ç–∞—Ç—É—Å

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ markdown –≤ –∫–æ–º–∞–Ω–¥–µ `/compare` –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
**–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞
