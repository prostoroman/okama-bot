# Отчет об исправлении названий символов в легенде графика сравнения

## Проблема
В команде `/compare` при создании графика "Накопленная доходность" в легенде название первого символа отображалось с ошибкой. Вместо оригинального символа (например, `AAPL.US`) отображалось название колонки из DataFrame (например, `AAPL`).

## Причина
В методе `create_unified_wealth_chart` в файле `services/chart_styles.py` (строка 976) использовался параметр `label=column`, где `column` - это название колонки из DataFrame `wealth_indexes`. Библиотека okama создает DataFrame с колонками, которые могут отличаться от оригинальных символов (например, убирает суффикс `.US`).

## Решение
Исправлен метод `create_unified_wealth_chart` в файле `services/chart_styles.py`:

```python
# Рисуем данные для сравнения
for i, column in enumerate(data.columns):
    color = self.get_color(i)
    # Используем оригинальный символ для легенды, если он доступен
    if i < len(symbols):
        label = symbols[i]
    else:
        label = column
    ax.plot(data.index, data[column].values, 
           color=color, alpha=self.lines['alpha'], label=label)
```

## Изменения
- **Файл**: `services/chart_styles.py`
- **Строки**: 973-982
- **Изменение**: Добавлена логика использования оригинальных символов из списка `symbols` для названий в легенде вместо названий колонок DataFrame

## Тестирование
Создан тест `tests/test_legend_labels_fix.py` для проверки корректности исправления с различными форматами символов.

## Результат
Теперь в легенде графика сравнения накопленной доходности отображаются оригинальные символы, введенные пользователем, а не названия колонок из внутреннего DataFrame.
