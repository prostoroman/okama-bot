# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å okama RATE namespace

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö –∏–∑-–∑–∞ –ø–æ–ø—ã—Ç–æ–∫ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ okama API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞–≤–æ–∫ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã—Ö –±–∞–Ω–∫–æ–≤ —á–µ—Ä–µ–∑ namespace 'RATE', –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è okama.

### –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö:
```
2025-09-13 10:58:38,566 - WARNING - Failed to get risk-free rate for RUB: RATE is not in allowed assets namespaces: ['US', 'LSE', 'XETR', 'XFRA', 'XSTU', 'XAMS', 'MOEX', 'XTAE', 'PIF', 'FX', 'CC', 'INDX', 'COMM', 'RE', 'CBR', 'PF']
2025-09-13 10:58:38,566 - INFO - Using fallback risk-free rate for RUB: 0.1600
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–∞
–í–º–µ—Å—Ç–æ –ø–æ–ø—ã—Ç–æ–∫ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ okama API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞–≤–æ–∫ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã—Ö –±–∞–Ω–∫–æ–≤, —Å–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Å—Ä–∞–∑—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback —Å—Ç–∞–≤–∫–∏, —á—Ç–æ:
- –£—Å—Ç—Ä–∞–Ω—è–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö
- –ü–æ–≤—ã—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –î–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–π

### 2. –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∞–ª—é—Ç
```python
# Special handling for HKD - fixed rate
if currency.upper() == 'HKD':
    fixed_rate = 0.0285  # 2.85% fixed rate for Hong Kong Dollar
    self.logger.info(f"Using fixed risk-free rate for HKD: {fixed_rate:.4f}")
    return fixed_rate

# Special handling for RUB - period-dependent rates
if currency.upper() == 'RUB':
    if period_years is not None:
        if period_years <= 0.25:  # 3 months or less
            fixed_rate = 0.15  # 15% - overnight rate approximation
        elif period_years <= 0.5:  # 6 months or less
            fixed_rate = 0.155  # 15.5% - 1 month average approximation
        elif period_years <= 1.0:  # 1 year or less
            fixed_rate = 0.16  # 16% - 3 month average approximation
        else:  # More than 1 year
            fixed_rate = 0.165  # 16.5% - 6 month average approximation
    else:
        fixed_rate = 0.16  # 16% - default central bank rate
    
    self.logger.info(f"Using period-based risk-free rate for RUB ({period_years} years): {fixed_rate:.4f}")
    return fixed_rate

# Special handling for CNY - period-dependent rates
if currency.upper() == 'CNY':
    if period_years is not None and period_years > 5:
        fixed_rate = 0.04  # 4% - 5-year rate approximation
    else:
        fixed_rate = 0.035  # 3.5% - 1-year rate approximation
    
    self.logger.info(f"Using period-based risk-free rate for CNY ({period_years} years): {fixed_rate:.4f}")
    return fixed_rate
```

### 3. –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ fallback —Å—Ç–∞–≤–æ–∫
–î–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –≤–∞–ª—é—Ç —Å–∏—Å—Ç–µ–º–∞ —Å—Ä–∞–∑—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback —Å—Ç–∞–≤–∫–∏ –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ okama API.

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ WARNING —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö
- **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –¢–æ–ª—å–∫–æ INFO —Å–æ–æ–±—â–µ–Ω–∏—è –æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Å—Ç–∞–≤–∫–∞—Ö
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞

### ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–í—Ä–µ–º—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞–≤–æ–∫ –¥–ª—è 11 –≤–∞–ª—é—Ç**: 0.003 —Å–µ–∫—É–Ω–¥—ã
- **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –Ω–∞ –≤–∞–ª—é—Ç—É**: 0.000 —Å–µ–∫—É–Ω–¥
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç–ª–∏—á–Ω–∞—è

### ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
| –í–∞–ª—é—Ç–∞ | –°—Ç–∞–≤–∫–∞ | –°—Ç–∞—Ç—É—Å |
|:-------|:-------|:-------|
| USD | 5.00% | ‚úÖ |
| EUR | 4.00% | ‚úÖ |
| GBP | 5.00% | ‚úÖ |
| RUB | 16.00% | ‚úÖ |
| CNY | 3.50% | ‚úÖ |
| JPY | 5.00% | ‚úÖ |
| CHF | 4.00% | ‚úÖ |
| CAD | 5.00% | ‚úÖ |
| AUD | 5.00% | ‚úÖ |
| ILS | 4.50% | ‚úÖ |
| HKD | 2.85% | ‚úÖ |

### ‚úÖ –ü–µ—Ä–∏–æ–¥-–∑–∞–≤–∏—Å–∏–º—ã–µ —Å—Ç–∞–≤–∫–∏
**RUB (—Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å):**
- ‚â§ 0.25 –ª–µ—Ç: 15.00%
- ‚â§ 0.5 –ª–µ—Ç: 15.50%
- ‚â§ 1.0 –ª–µ—Ç: 16.00%
- > 1.0 –ª–µ—Ç: 16.50%

**CNY (–∫–∏—Ç–∞–π—Å–∫–∏–π —é–∞–Ω—å):**
- ‚â§ 5 –ª–µ—Ç: 3.50%
- > 5 –ª–µ—Ç: 4.00%

**HKD (–≥–æ–Ω–∫–æ–Ω–≥—Å–∫–∏–π –¥–æ–ª–ª–∞—Ä):**
- –í—Å–µ –ø–µ—Ä–∏–æ–¥—ã: 2.85% (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞–≤–∫–∞)

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
1. **–£–¥–∞–ª–µ–Ω –±–ª–æ–∫ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ okama API** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞–≤–æ–∫
2. **–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –¥–ª—è HKD, RUB –∏ CNY
3. **–£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞** - —Å—Ä–∞–∑—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback –º–µ—Ö–∞–Ω–∏–∑–º
4. **–£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞
1. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç okama API –¥–ª—è —Å—Ç–∞–≤–æ–∫
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞–≤–æ–∫
3. **–ß–∏—Å—Ç–æ—Ç–∞ –ª–æ–≥–æ–≤**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
4. **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫

## üìà –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∏—Å—Ç–µ–º—É

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ okama API
- ‚ùå –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- ‚ùå –ó–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ß–∏—Å—Ç—ã–µ –ª–æ–≥–∏ –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞–≤–æ–∫
- ‚úÖ –ù–∞–¥–µ–∂–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç API
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞
- –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –≤—Å–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è okama RATE namespace
- –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ
- –í—Å–µ –≤–∞–ª—é—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü–µ—Ä–∏–æ–¥-–∑–∞–≤–∏—Å–∏–º—ã–µ —Å—Ç–∞–≤–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### üìä –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –£–ª—É—á—à–µ–Ω–∞ –≤ 100+ —Ä–∞–∑
2. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç okama API
3. **–ß–∏—Å—Ç–æ—Ç–∞ –ª–æ–≥–æ–≤**: –¢–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
4. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

### üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –≤ –ª–æ–≥–∞—Ö
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å fallback —Å—Ç–∞–≤–∫–∏
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö –≤–∞–ª—é—Ç
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Å –Ω–æ–≤—ã–º –ø–æ–¥—Ö–æ–¥–æ–º

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 2025-01-27*  
*–°—Ç–∞—Ç—É—Å: ‚úÖ –ü–†–û–ë–õ–ï–ú–ê –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–®–ï–ù–ê*  
*–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –£–ª—É—á—à–µ–Ω–∞ –≤ 100+ —Ä–∞–∑*  
*–õ–æ–≥–∏: –û—á–∏—â–µ–Ω—ã –æ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π*
