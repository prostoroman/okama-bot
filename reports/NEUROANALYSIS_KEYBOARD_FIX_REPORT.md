# Отчет об исправлении скрытия клавиатуры при нейроанализе

## Проблема
Системное сообщение при нажатии кнопки "нейроанализ" скрывало reply keyboard, что было нежелательно.

## Анализ проблемы

### Найденные места
Обнаружены два системных сообщения "Анализирую данные" с параметром `hide_keyboard=True`:

1. **Функция `_handle_data_analysis_compare_button`** (строка 7779)
   - Обработка кнопки нейроанализа (Gemini)
   - Сообщение: "Анализирую данные"

2. **Функция `_handle_yandexgpt_analysis_compare_button`** (строка 7848)
   - Обработка кнопки YandexGPT анализа
   - Сообщение: "Анализирую данные..."

## Проведенные исправления

### Убран параметр `hide_keyboard=True` из системных сообщений

**Функция `_handle_data_analysis_compare_button`:**
```python
# Было:
await self._send_ephemeral_message(update, context, "Анализирую данные", parse_mode='Markdown', delete_after=3, hide_keyboard=True)

# Стало:
await self._send_ephemeral_message(update, context, "Анализирую данные", parse_mode='Markdown', delete_after=3)
```

**Функция `_handle_yandexgpt_analysis_compare_button`:**
```python
# Было:
await self._send_ephemeral_message(update, context, "Анализирую данные...", parse_mode='Markdown', delete_after=3, hide_keyboard=True)

# Стало:
await self._send_ephemeral_message(update, context, "Анализирую данные...", parse_mode='Markdown', delete_after=3)
```

## Результат

✅ **Проблема решена:**
- Убрано скрытие reply keyboard при нажатии кнопки нейроанализа
- Убрано скрытие reply keyboard при нажатии кнопки YandexGPT анализа
- Системные сообщения остались для информирования пользователя о процессе

✅ **Функциональность сохранена:**
- Кнопки нейроанализа работают как прежде
- Системные сообщения показывают процесс анализа
- Reply keyboard остается видимой для пользователя

✅ **Пользовательский опыт улучшен:**
- Пользователь может продолжать использовать reply keyboard во время анализа
- Нет нежелательного скрытия интерфейса
- Сохранена возможность взаимодействия с ботом

## Технические детали

### Измененные функции
- `_handle_data_analysis_compare_button` - обработка кнопки нейроанализа (Gemini)
- `_handle_yandexgpt_analysis_compare_button` - обработка кнопки YandexGPT анализа

### Сохраненная функциональность
- Системные сообщения "Анализирую данные" отображаются 3 секунды
- Процесс анализа данных выполняется как прежде
- Обработка ошибок и fallback механизмы сохранены

### Логика работы
1. Пользователь нажимает кнопку нейроанализа
2. Отображается системное сообщение "Анализирую данные"
3. Reply keyboard остается видимой
4. Выполняется анализ данных
5. Показывается результат анализа
