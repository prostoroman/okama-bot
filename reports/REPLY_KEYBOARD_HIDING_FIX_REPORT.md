# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Å–∫—Ä—ã—Ç–∏—è Reply Keyboard

## –ü—Ä–æ–±–ª–µ–º–∞
–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å–∫—Ä—ã—Ç–∏—è reply keyboard –¥–ª—è –∫–æ–º–∞–Ω–¥ `/help`, `/compare`, `/portfolio`, `/info` –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—É—Å—Ç—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞
–ú–µ—Ç–æ–¥ `_ensure_no_reply_keyboard()` –æ—Ç–ø—Ä–∞–≤–ª—è–ª —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–æ–±–µ–ª–æ–º `" "`, –Ω–æ –º–µ—Ç–æ–¥ `_send_message_safe()` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É:

```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ text –Ω–µ –ø—É—Å—Ç–æ–π
if not text or text.strip() == "":
    self.logger.error("Cannot send message: text is empty")
    return
```

–ü—Ä–æ–±–µ–ª `" "` –ø–æ—Å–ª–µ `strip()` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π, –ø–æ—ç—Ç–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏–µ —Å `ReplyKeyboardRemove()` –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ—Å—å.

### 2. –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `/help` - –∫–æ–º–∞–Ω–¥–∞ —Å–ø—Ä–∞–≤–∫–∏
- `/compare` - –∫–æ–º–∞–Ω–¥–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- `/portfolio` - –∫–æ–º–∞–Ω–¥–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤  
- `/info` - –∫–æ–º–∞–Ω–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–í—Å–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –≤—ã–∑—ã–≤–∞—é—Ç `await self._ensure_no_reply_keyboard(update, context)` –≤ –Ω–∞—á–∞–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏.

## –†–µ—à–µ–Ω–∏–µ

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –º–µ—Ç–æ–¥–µ `_ensure_no_reply_keyboard` (—Å—Ç—Ä–æ–∫–∞ 6522)

**–ë—ã–ª–æ:**
```python
await self._send_message_safe(
    update, 
    " ",  # –û–±—ã—á–Ω—ã–π –ø—Ä–æ–±–µ–ª
    reply_markup=ReplyKeyboardRemove(),
    parse_mode=None
)
```

**–°—Ç–∞–ª–æ:**
```python
await self._send_message_safe(
    update, 
    "k",  # –ü—Ä–æ—Å—Ç–∞—è –±—É–∫–≤–∞ k (keyboard)
    reply_markup=ReplyKeyboardRemove(),
    parse_mode=None
)
```

### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è
1. **–ü—Ä–æ—Å—Ç–∞—è –±—É–∫–≤–∞**: `k` - —ç—Ç–æ –æ–±—ã—á–Ω–∞—è –ª–∞—Ç–∏–Ω—Å–∫–∞—è –±—É–∫–≤–∞, –∫–æ—Ç–æ—Ä–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –Ω–µ –ø—É—Å—Ç–∞—è
2. **–ü—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É**: –ë—É–∫–≤–∞ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π –ø–æ—Å–ª–µ `strip()`, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –≤ `_send_message_safe()`
3. **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ**: –û–¥–Ω–∞ –±—É–∫–≤–∞ –∏–º–µ–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ
4. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: `ReplyKeyboardRemove()` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–∫—Ä—ã–≤–∞–µ—Ç reply keyboard
5. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –û–±—ã—á–Ω–∞—è –±—É–∫–≤–∞ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–æ–∫ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Telegram
6. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ Unicode —Å–∏–º–≤–æ–ª–æ–≤ –∏–ª–∏ —ç–º–æ–¥–∑–∏

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- Reply keyboard —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- `/help` - —Å–∫—Ä—ã–≤–∞–µ—Ç keyboard –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø—Ä–∞–≤–∫—É
- `/compare` - —Å–∫—Ä—ã–≤–∞–µ—Ç keyboard –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–º–µ—Ä—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- `/portfolio` - —Å–∫—Ä—ã–≤–∞–µ—Ç keyboard –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–º–µ—Ä—ã –ø–æ—Ä—Ç—Ñ–µ–ª—è
- `/info` - —Å–∫—Ä—ã–≤–∞–µ—Ç keyboard –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–º–µ—Ä—ã –∞–Ω–∞–ª–∏–∑–∞

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
- **–§–∞–π–ª**: `bot.py`
- **–ú–µ—Ç–æ–¥**: `_ensure_no_reply_keyboard()` (—Å—Ç—Ä–æ–∫–∞ 6522)
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ**: –ó–∞–º–µ–Ω–∞ –ø—Ä–æ–±–µ–ª–∞ –Ω–∞ –Ω–µ–≤–∏–¥–∏–º—ã–π Unicode —Å–∏–º–≤–æ–ª
- **Fallback**: –°–æ—Ö—Ä–∞–Ω–µ–Ω fallback –∫ `_manage_reply_keyboard()` –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

1. **–ö–æ–º–∞–Ω–¥–∞ `/help`**:
   - –î–æ–ª–∂–Ω–∞ —Å–∫—Ä—ã—Ç—å reply keyboard
   - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ –∫–æ–º–∞–Ω–¥–∞–º

2. **–ö–æ–º–∞–Ω–¥–∞ `/compare`**:
   - –î–æ–ª–∂–Ω–∞ —Å–∫—Ä—ã—Ç—å reply keyboard
   - –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

3. **–ö–æ–º–∞–Ω–¥–∞ `/portfolio`**:
   - –î–æ–ª–∂–Ω–∞ —Å–∫—Ä—ã—Ç—å reply keyboard
   - –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –ø–æ—Ä—Ç—Ñ–µ–ª—è

4. **–ö–æ–º–∞–Ω–¥–∞ `/info`**:
   - –î–æ–ª–∂–Ω–∞ —Å–∫—Ä—ã—Ç—å reply keyboard
   - –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∞–Ω–∞–ª–∏–∑–∞

## –°—Ç–∞—Ç—É—Å
‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - Reply keyboard —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
