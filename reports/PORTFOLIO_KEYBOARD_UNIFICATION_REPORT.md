# –û—Ç—á–µ—Ç –æ–± —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∫–æ–º–∞–Ω–¥—ã /compare

## üéØ –¶–µ–ª—å
–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –∫–æ–º–∞–Ω–¥—ã `/compare` —Ç–∞–∫, —á—Ç–æ–±—ã –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –Ω–∞–±–æ—Ä –∫–Ω–æ–ø–æ–∫, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø–µ—Ä–≤–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é (–±–µ–∑ YandexGPT), –∏ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–í –ø–æ—Ä—Ç—Ñ–µ–ª—å".

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_create_compare_command_keyboard`

#### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
- **–§–∞–π–ª**: `bot.py`
- **–°—Ç—Ä–æ–∫–∏**: 8239-8279

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞–∑–≤–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫ —Å –ø–µ—Ä–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º:
  - "üí∞ –î–∏–≤–∏–¥–µ–Ω–¥—ã" –≤–º–µ—Å—Ç–æ "üí∞ Dividends"
  - "üìâ –ü—Ä–æ—Å–∞–¥–∫–∏" –≤–º–µ—Å—Ç–æ "üìâ Drawdowns"
  - "üîó –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è" –≤–º–µ—Å—Ç–æ "üîó Correlation Matrix"
- –£–±—Ä–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üìä Risk / Return" (–Ω–µ –±—ã–ª–æ –≤ –ø–µ—Ä–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üíº –í –ü–æ—Ä—Ç—Ñ–µ–ª—å" —Å callback_data `compare_portfolio_{symbols_str}`
- –£–±—Ä–∞–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ YandexGPT (—Ç–æ–ª—å–∫–æ Gemini)
- –£–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ –≤ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ, —á—Ç–æ –∏ –≤ –ø–µ—Ä–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
```
üí∞ –î–∏–≤–∏–¥–µ–Ω–¥—ã    üìâ –ü—Ä–æ—Å–∞–¥–∫–∏
üìä –ú–µ—Ç—Ä–∏–∫–∏      üîó –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è
üìà –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞
üíº –í –ü–æ—Ä—Ç—Ñ–µ–ª—å
AI-–∞–Ω–∞–ª–∏–∑ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω Gemini)
–ê–Ω–∞–ª–∏–∑ –≥—Ä–∞—Ñ–∏–∫–∞ Gemini (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω Gemini)
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–æ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã /compare

#### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
- **–§–∞–π–ª**: `bot.py`
- **–°—Ç—Ä–æ–∫–∏**: 3736-3737

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è
- –ó–∞–º–µ–Ω–µ–Ω–æ —Ä—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –Ω–∞ –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ `_create_compare_command_keyboard`
- –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- –¢–µ–ø–µ—Ä—å –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—É –∂–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É, —á—Ç–æ –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ

### 3. –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∫–Ω–æ–ø–∫–∏ "–í –ø–æ—Ä—Ç—Ñ–µ–ª—å"

#### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
- **–§–∞–π–ª**: `bot.py`
- **–°—Ç—Ä–æ–∫–∏**: 6342-6375

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `_handle_compare_portfolio_button` —É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –£–¥–∞–ª—è–µ—Ç –∫–Ω–æ–ø–∫–∏ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ–∂–∏–¥–∞–Ω–∏—è –≤–µ—Å–æ–≤ –ø–æ—Ä—Ç—Ñ–µ–ª—è
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –ø–æ—Ä—Ç—Ñ–µ–ª—è

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Callback –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–í –ø–æ—Ä—Ç—Ñ–µ–ª—å"
- **–§–æ—Ä–º–∞—Ç**: `compare_portfolio_{symbol1}_{symbol2}_{symbol3}`
- **–ü—Ä–∏–º–µ—Ä**: `compare_portfolio_SPY.US_QQQ.US_BND.US`
- **–û–±—Ä–∞–±–æ—Ç–∫–∞**: –§—É–Ω–∫—Ü–∏—è `clean_symbol` –æ—á–∏—â–∞–µ—Ç —Å–∏–º–≤–æ–ª—ã –æ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

### –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã `/compare` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ñ—É–Ω–∫—Ü–∏—é `_create_compare_command_keyboard`
- –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ, —á—Ç–æ –∏—Å–∫–ª—é—á–∞–µ—Ç —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ –∏–ª–∏ –∏–∑–º–µ–Ω—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ü–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –±–µ–∑ "–í –ø–æ—Ä—Ç—Ñ–µ–ª—å"
- –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è: —É—Å—Ç–∞—Ä–µ–≤—à–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –¥—Ä—É–≥–∏–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è: –µ–¥–∏–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –∫–Ω–æ–ø–∫–æ–π "–í –ø–æ—Ä—Ç—Ñ–µ–ª—å"
- –ö–Ω–æ–ø–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –ø–µ—Ä–≤–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é (–±–µ–∑ YandexGPT)
- –£–ø—Ä–æ—â–µ–Ω–Ω–æ–µ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–æ–¥–∞

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –Ω–µ—Ç
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–í –ø–æ—Ä—Ç—Ñ–µ–ª—å" —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—Å–µ callback'—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- ‚úÖ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –µ–¥–∏–Ω–æ–º –º–µ—Å—Ç–µ

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ù–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–ò–∑–º–µ–Ω–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é. –ö–æ–º–∞–Ω–¥–∞ `/compare` —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π "–í –ø–æ—Ä—Ç—Ñ–µ–ª—å" –≤–æ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö.