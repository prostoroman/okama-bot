# –û—Ç—á–µ—Ç –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã /compare –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ç–∞–±–ª–∏—Ü–µ–π

## üéØ –¶–µ–ª—å
–ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/compare` —Ç–∞–∫, —á—Ç–æ–±—ã —Å–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ –≤—ã–≤–æ–¥–∏–ª–∞—Å—å –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º —Å markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∫–æ–º–∞–Ω–¥–µ `/list`.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ `_create_enhanced_chart_caption`
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 7348-7381
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
  - –£–¥–∞–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `summary_table` –∏–∑ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏
  - –£–±—Ä–∞–Ω–∞ —Å–µ–∫—Ü–∏—è —Å —Ç–∞–±–ª–∏—Ü–µ–π –º–µ—Ç—Ä–∏–∫ –∏–∑ –ø–æ–¥–ø–∏—Å–∏ –≥—Ä–∞—Ñ–∏–∫–∞
  - –û—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä–∞—Ñ–∏–∫–µ: –Ω–∞–∑–≤–∞–Ω–∏–µ, –∞–∫—Ç–∏–≤—ã, –≤–∞–ª—é—Ç–∞, –ø–µ—Ä–∏–æ–¥
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–¥–ø–∏—Å—å –≥—Ä–∞—Ñ–∏–∫–∞ —Å—Ç–∞–ª–∞ –±–æ–ª–µ–µ –ª–∞–∫–æ–Ω–∏—á–Ω–æ–π –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∞–º–æ–º –≥—Ä–∞—Ñ–∏–∫–µ

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ç–∞–±–ª–∏—Ü–µ–π
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 3737-3739
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≥—Ä–∞—Ñ–∏–∫–∞
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –±–ª–æ–∫–æ–º –∫–æ–¥–∞ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã
  - –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è: `üìä **–°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫**\n\n```\n{summary_table}\n````
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –¢–∞–±–ª–∏—Ü–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∏
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `bot.py`, —Å—Ç—Ä–æ–∫–∏ 3662-3665
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –£–±—Ä–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `summary_table` –∏–∑ –≤—ã–∑–æ–≤–∞ `_create_enhanced_chart_caption`

## üìã –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–æ –∏ –ø–æ—Å–ª–µ

### –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```
üìà –ì—Ä–∞—Ñ–∏–∫ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏

–ê–∫—Ç–∏–≤—ã: SPY.US, QQQ.US
–í–∞–ª—é—Ç–∞: USD
–ü–µ—Ä–∏–æ–¥: 5Y

üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫

| –ú–µ—Ç—Ä–∏–∫–∞                         | SPY.US   | QQQ.US   |
|:--------------------------------|:---------|:---------|
| –°—Ä–µ–¥–Ω–µ–≥–æ–¥–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (CAGR) | 10.25%   | 15.30%   |
| –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å                   | 16.50%   | 22.40%   |
| –ö–æ—ç—Ñ—Ñ. –®–∞—Ä–ø–∞                    | 0.62     | 0.68     |
| –ú–∞–∫—Å. –ø—Ä–æ—Å–∞–¥–∫–∞                  | -33.92%  | -50.21%  |
```

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

**–°–æ–æ–±—â–µ–Ω–∏–µ 1 (–≥—Ä–∞—Ñ–∏–∫):**
```
üìà –ì—Ä–∞—Ñ–∏–∫ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏

–ê–∫—Ç–∏–≤—ã: SPY.US, QQQ.US
–í–∞–ª—é—Ç–∞: USD
–ü–µ—Ä–∏–æ–¥: 5Y
```

**–°–æ–æ–±—â–µ–Ω–∏–µ 2 (—Ç–∞–±–ª–∏—Ü–∞):**
```
üìä **–°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫**

```
| –ú–µ—Ç—Ä–∏–∫–∞                         | SPY.US   | QQQ.US   |
|:--------------------------------|:---------|:---------|
| –°—Ä–µ–¥–Ω–µ–≥–æ–¥–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (CAGR) | 10.25%   | 15.30%   |
| –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å                   | 16.50%   | 22.40%   |
| –ö–æ—ç—Ñ—Ñ. –®–∞—Ä–ø–∞                    | 0.62     | 0.68     |
| –ú–∞–∫—Å. –ø—Ä–æ—Å–∞–¥–∫–∞                  | -33.92%  | -50.21%  |
```
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã:
- **Markdown –±–ª–æ–∫ –∫–æ–¥–∞**: –¢–∞–±–ª–∏—Ü–∞ –æ–±–µ—Ä–Ω—É—Ç–∞ –≤ –±–ª–æ–∫ –∫–æ–¥–∞ –¥–ª—è –ª—É—á—à–µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **Telegram —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `parse_mode='Markdown'` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∫–æ–º–∞–Ω–¥–µ `/list` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `_create_enhanced_chart_caption`
- –î–æ–±–∞–≤–ª–µ–Ω fallback –¥–ª—è —Å–ª—É—á–∞—è –æ—à–∏–±–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –∫–æ–¥–µ
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∏:
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `_create_enhanced_chart_caption` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤–æ–π —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ—à–∏–±–∫–∏ –ª–∏–Ω—Ç–µ—Ä–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

### –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```python
result = bot._create_enhanced_chart_caption(['SPY.US', 'QQQ.US'], 'USD', '5Y')
# –†–µ–∑—É–ª—å—Ç–∞—Ç: üìà <b>–ì—Ä–∞—Ñ–∏–∫ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏</b>
# 
# <b>–ê–∫—Ç–∏–≤—ã:</b> SPY.US, QQQ.US
# <b>–í–∞–ª—é—Ç–∞:</b> USD
# <b>–ü–µ—Ä–∏–æ–¥:</b> 5Y
```

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. **–õ—É—á—à–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å**: –¢–∞–±–ª–∏—Ü–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
2. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å /list**: –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—é —Ç–∞–±–ª–∏—Ü
3. **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å**: –ì—Ä–∞—Ñ–∏–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
4. **Telegram –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ markdown –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ –¥–ª—è –ª—É—á—à–µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ò–∑–º–µ–Ω–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã. –ö–æ–º–∞–Ω–¥–∞ `/compare` —Ç–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–¥–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º —Å markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∫–æ–º–∞–Ω–¥–µ `/list`. –≠—Ç–æ —É–ª—É—á—à–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—é —Ç–∞–±–ª–∏—Ü –≤ –±–æ—Ç–µ.
