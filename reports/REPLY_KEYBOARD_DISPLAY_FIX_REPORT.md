# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º Reply Keyboard

## –ü—Ä–æ–±–ª–µ–º–∞

Reply keyboard –¥–ª—è –∫–æ–º–∞–Ω–¥—ã `/list <–∫–æ–¥>` –≤—Å–µ –µ—â–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∞—Å—å, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–∏–ª –≤—ã–∑–æ–≤—ã `_manage_reply_keyboard` –∏–∑ —Ñ—É–Ω–∫—Ü–∏–π –ø–æ–∫–∞–∑–∞ —Å–∏–º–≤–æ–ª–æ–≤, —á—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ —Ç–æ–º—É, —á—Ç–æ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–ª–∞—Å—å —Å –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä.

## –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã

1. **–£–¥–∞–ª–µ–Ω—ã –≤—ã–∑–æ–≤—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–∏–ª `await self._manage_reply_keyboard(update, context, "list")` –∏–∑ —Ñ—É–Ω–∫—Ü–∏–π –ø–æ–∫–∞–∑–∞ —Å–∏–º–≤–æ–ª–æ–≤
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã "list"** - —Ñ—É–Ω–∫—Ü–∏—è `_manage_reply_keyboard` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–∞ —Ç–∏–ø –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã "list"
3. **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –±—ã–ª–∞ —É–ø—Ä–æ—â–µ–Ω–∞ –∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ —Å –∫–∏—Ç–∞–π—Å–∫–∏–º–∏ –±–∏—Ä–∂–∞–º–∏

## –†–µ—à–µ–Ω–∏–µ

### 1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—ã–∑–æ–≤—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏

**–§–∞–π–ª:** `bot.py`  
**–§—É–Ω–∫—Ü–∏–∏:** `_show_namespace_symbols()` –∏ `_show_tushare_namespace_symbols()`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```python
# First, manage keyboard switching
await self._manage_reply_keyboard(update, context, "list")
```

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
- –ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º reply keyboard –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä
- –ü—Ä–µ–¥—ã–¥—É—â–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (–ø–æ—Ä—Ç—Ñ–µ–ª—å –∏–ª–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ) —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ "list"

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã "list"

**–§–∞–π–ª:** `bot.py`  
**–§—É–Ω–∫—Ü–∏—è:** `_manage_reply_keyboard()`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```python
elif keyboard_type == "list":
    # –î–ª—è list –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –Ω–µ –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    # –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —É–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ _show_namespace_symbols
    pass
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã "list"
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

### 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

**–§–∞–π–ª:** `bot.py`  
**–§—É–Ω–∫—Ü–∏—è:** `_handle_list_reply_keyboard_button()`

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ç–∞–π—Å–∫–∏—Ö –±–∏—Ä–∂ (SSE, SZSE, BSE, HKEX)
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏

**–õ–æ–≥–∏–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:**
```python
# Check if it's a Chinese exchange
chinese_exchanges = ['SSE', 'SZSE', 'BSE', 'HKEX']
if current_namespace in chinese_exchanges:
    await self._show_tushare_namespace_symbols(update, context, current_namespace, is_callback=False, page=new_page)
else:
    await self._show_namespace_symbols(update, context, current_namespace, is_callback=False, page=new_page)
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π:**
1. –í—ã–∑–æ–≤ `_manage_reply_keyboard(update, context, "list")`
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π –∞–∫—Ç–∏–≤–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
3. –°–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã "list"
5. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–∫–∞–∑ reply keyboard

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä

- **"portfolio"** - –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª—è–º–∏
- **"compare"** - –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∞–∫—Ç–∏–≤–æ–≤  
- **"list"** - –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ —Å–ø–∏—Å–∫—É —Å–∏–º–≤–æ–ª–æ–≤
- **None** - —Å–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä

### –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º

**–î–ª—è –æ–±—ã—á–Ω—ã—Ö –±–∏—Ä–∂ (okama):**
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `ok.symbols_in_namespace()`
- –ü–æ–¥—Å—á–µ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∏–º–≤–æ–ª–æ–≤
- –†–∞—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü

**–î–ª—è –∫–∏—Ç–∞–π—Å–∫–∏—Ö –±–∏—Ä–∂ (tushare):**
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `tushare_service.get_exchange_symbols_count()`
- –ü–æ–¥—Å—á–µ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∏–º–≤–æ–ª–æ–≤
- –†–∞—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞
```bash
python3 -c "import bot; print('Bot imports successfully')"
```
‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å–ø–µ—à–Ω–æ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### Reply Keyboard –¥–ª—è –∫–æ–º–∞–Ω–¥—ã /list

**–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏:**
- ‚¨ÖÔ∏è –ù–∞–∑–∞–¥ - –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
- ‚û°Ô∏è –í–ø–µ—Ä–µ–¥ - –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, "1/5")

**–ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π:**
- üìä Excel - —ç–∫—Å–ø–æ—Ä—Ç –≤ Excel
- üîç –ê–Ω–∞–ª–∏–∑ - –ø–µ—Ä–µ—Ö–æ–¥ –∫ –∞–Ω–∞–ª–∏–∑—É
- ‚öñÔ∏è –°—Ä–∞–≤–Ω–∏—Ç—å - –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é
- üíº –í –ø–æ—Ä—Ç—Ñ–µ–ª—å - –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –ø–æ—Ä—Ç—Ñ–µ–ª—è
- üè† –î–æ–º–æ–π - –≤–æ–∑–≤—Ä–∞—Ç –∫ —Å–ø–∏—Å–∫—É –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏–º–µ–Ω

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω

**–û–±—ã—á–Ω—ã–µ (okama):** US, MOEX, LSE, XETR, XFRA, XAMS, INDX, FX, COMM, CC –∏ –¥—Ä—É–≥–∏–µ

**–ö–∏—Ç–∞–π—Å–∫–∏–µ (tushare):** SSE, SZSE, BSE, HKEX

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏–º–µ–Ω
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å –∫–∏—Ç–∞–π—Å–∫–∏–º–∏ –±–∏—Ä–∂–∞–º–∏

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º reply keyboard –≤ –∫–æ–º–∞–Ω–¥–µ `/list` —É—Å–ø–µ—à–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞. –¢–µ–ø–µ—Ä—å:

1. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä** - –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `/list <–∫–æ–¥>` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
2. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** - –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏–º–µ–Ω, –≤–∫–ª—é—á–∞—è –∫–∏—Ç–∞–π—Å–∫–∏–µ –±–∏—Ä–∂–∏
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏** - –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∏–∑ inline keyboard –¥–æ—Å—Ç—É–ø–Ω—ã –≤ reply keyboard
4. **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - –±–æ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ç–µ–ø–µ—Ä—å –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `/list <–∫–æ–¥>` —Å –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π reply keyboard, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É–¥–æ–±–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é –ø–æ —Å–ø–∏—Å–∫—É —Å–∏–º–≤–æ–ª–æ–≤.
