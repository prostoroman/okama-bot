# –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ–± –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ asset_service.py

## –û–±–∑–æ—Ä –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

–ü—Ä–æ–≤–µ–¥–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è `asset_service.py` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏–∑ `chart_styles.py`. –£–±—Ä–∞–Ω—ã –≤—Å–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Å–ø–æ—Å–æ–±—ã —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤, –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ, —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã.

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. **–ú–µ—Ç–æ–¥ `create_price_chart`** ‚úÖ –ó–ê–í–ï–†–®–ï–ù
- **–ë—ã–ª–æ**: ~200 —Å—Ç—Ä–æ–∫ —Ä—É—á–Ω–æ–≥–æ –∫–æ–¥–∞ —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- **–°—Ç–∞–ª–æ**: –û–¥–∏–Ω –≤—ã–∑–æ–≤ `chart_styles.create_price_chart()`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª–Ω–∞—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è, —É–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

### 2. **–ú–µ—Ç–æ–¥ `get_asset_info`** ‚úÖ –ó–ê–í–ï–†–®–ï–ù
- **–ë—ã–ª–æ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `figsize=(10, 4)` –≤ `chart_styles.create_price_chart()`
- **–°—Ç–∞–ª–æ**: –£–±—Ä–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `figsize`, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ chart_styles

### 3. **–ú–µ—Ç–æ–¥ `get_asset_price`** ‚úÖ –ó–ê–í–ï–†–®–ï–ù
- **–ë—ã–ª–æ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `figsize=(10, 4)` –≤ `chart_styles.create_price_chart()`
- **–°—Ç–∞–ª–æ**: –£–±—Ä–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `figsize`, –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `period=''`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ chart_styles

### 4. **–ú–µ—Ç–æ–¥ `get_asset_dividends`** ‚úÖ –ó–ê–í–ï–†–®–ï–ù
- **–ë—ã–ª–æ**: –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ —á–µ—Ä–µ–∑ `plt.subplots(figsize=(10, 4))`
- **–°—Ç–∞–ª–æ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `chart_styles.create_dividends_chart()`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª–Ω–∞—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è, Nordic Pro —Å—Ç–∏–ª—å

## –î–µ—Ç–∞–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### 1. **–£–±—Ä–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `figsize`**

**–ë—ã–ª–æ** (–≤ `get_asset_info`):
```python
fig, ax = chart_styles.create_price_chart(
    series_for_plot, symbol, getattr(asset, "currency", ""), 
    period='monthly', figsize=(10, 4)  # ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä
)
```

**–°—Ç–∞–ª–æ**:
```python
fig, ax = chart_styles.create_price_chart(
    series_for_plot, symbol, getattr(asset, "currency", ""), 
    period='monthly'  # ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã
)
```

**–ë—ã–ª–æ** (–≤ `get_asset_price`):
```python
fig, ax = chart_styles.create_price_chart(
    series_for_plot, symbol, getattr(asset, "currency", ""), 
    figsize=(10, 4)  # ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä
)
```

**–°—Ç–∞–ª–æ**:
```python
fig, ax = chart_styles.create_price_chart(
    series_for_plot, symbol, getattr(asset, "currency", ""), 
    period=''  # ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–µ—Ä–∏–æ–¥, —É–±—Ä–∞–Ω figsize
)
```

### 2. **–ó–∞–º–µ–Ω–µ–Ω —Ä—É—á–Ω–æ–π –∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ –¥–∏–≤–∏–¥–µ–Ω–¥–æ–≤**

**–ë—ã–ª–æ** (—Å—Ç–∞—Ä—ã–π, –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–¥):
```python
plt.style.use('fivethirtyeight')  # ‚ùå –ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å—Ç–∏–ª—å
fig, ax = plt.subplots(figsize=(10, 4))  # ‚ùå –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
ax.bar(series_for_plot.index, series_for_plot.values, color='#2ca02c')
ax.set_title(f'–î–∏–≤–∏–¥–µ–Ω–¥—ã: {symbol}', fontsize=12)
ax.set_ylabel(f'–°—É–º–º–∞ ({getattr(asset, "currency", "")})')
ax.grid(True, axis='y', linestyle='--', alpha=0.3)  # ‚ùå –ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–µ—Ç–∫–∞
fig.autofmt_xdate()
fig.tight_layout()
buf = io.BytesIO()
fig.savefig(buf, format='png', dpi=150, bbox_inches='tight')  # ‚ùå –†—É—á–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
plt.close(fig)
```

**–°—Ç–∞–ª–æ** (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–¥):
```python
# Create standardized dividends chart using chart_styles
fig, ax = chart_styles.create_dividends_chart(
    data=series_for_plot, symbol=symbol, currency=getattr(asset, "currency", "")
)

# Save chart using standardized method
buf = io.BytesIO()
chart_styles.save_figure(fig, buf)
chart_styles.cleanup_figure(fig)
```

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ asset_service.py

### ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**

1. **`create_price_chart`** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `chart_styles.create_price_chart()`
2. **`get_asset_info`** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã –±–µ–∑ `figsize`
3. **`get_asset_price`** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã –±–µ–∑ `figsize`
4. **`get_asset_dividends`** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `chart_styles.create_dividends_chart()`

### ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã chart_styles:**

- `chart_styles.create_price_chart()` - –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ —Ü–µ–Ω
- `chart_styles.create_dividends_chart()` - –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –¥–∏–≤–∏–¥–µ–Ω–¥–æ–≤
- `chart_styles.save_figure()` - –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- `chart_styles.cleanup_figure()` - –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –ø–∞–º—è—Ç–∏

### ‚úÖ **–£–±—Ä–∞–Ω—ã –≤—Å–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã:**

- ‚ùå –ü–∞—Ä–∞–º–µ—Ç—Ä—ã `figsize`
- ‚ùå `plt.subplots()`
- ‚ùå `plt.style.use()`
- ‚ùå –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤
- ‚ùå –†—É—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π
- ‚ùå –†—É—á–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- ‚ùå –ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∫–∏

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. **–ü–æ–ª–Ω–∞—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è**
- –í—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `chart_styles.py`
- –ï–¥–∏–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π Nordic Pro —Å—Ç–∏–ª—å

### 2. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞**
- –£–±—Ä–∞–Ω–æ ~250 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞
- –ü—Ä–æ—Å—Ç—ã–µ –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ –≤—ã–∑–æ–≤—ã
- –ú–µ–Ω—å—à–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫

### 3. **–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞**
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è —Å–µ—Ç–∫–∞ –≤–æ –≤—Å–µ—Ö –≥—Ä–∞—Ñ–∏–∫–∞—Ö
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–ø–∏—Ä–∞–π—Ç—ã –∏ —Å—Ç–∏–ª–∏

### 4. **–õ–µ–≥–∫–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏**
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∏–ª–µ–π –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- –ï–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –≥—Ä–∞—Ñ–∏–∫–æ–≤
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

```
AssetService
‚îú‚îÄ‚îÄ create_price_chart() ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω
‚îÇ   ‚îî‚îÄ‚îÄ chart_styles.create_price_chart()
‚îú‚îÄ‚îÄ get_asset_info() ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω
‚îÇ   ‚îî‚îÄ‚îÄ chart_styles.create_price_chart()
‚îú‚îÄ‚îÄ get_asset_price() ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω
‚îÇ   ‚îî‚îÄ‚îÄ chart_styles.create_price_chart()
‚îú‚îÄ‚îÄ get_asset_dividends() ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω
‚îÇ   ‚îî‚îÄ‚îÄ chart_styles.create_dividends_chart()
‚îî‚îÄ‚îÄ get_asset_price_history() ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω
    ‚îî‚îÄ‚îÄ chart_styles.create_price_chart()
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å chart_styles.py

### **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã:**
1. **`create_price_chart`** - —Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ —Ü–µ–Ω —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏
2. **`create_dividends_chart`** - —Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –¥–∏–≤–∏–¥–µ–Ω–¥–æ–≤
3. **`save_figure`** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
4. **`cleanup_figure`** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
- **–ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å** - Nordic Pro –≤–µ–∑–¥–µ
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥
- **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –≥—Ä–∞—Ñ–∏–∫–æ–≤

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è `asset_service.py` **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–∞**. –¢–µ–ø–µ—Ä—å:

1. **‚úÖ –í—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã** - –ø–æ–ª–Ω–∞—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è
2. **‚úÖ –£–±—Ä–∞–Ω—ã –≤—Å–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Å–ø–æ—Å–æ–±—ã** - –Ω–µ—Ç —Ä—É—á–Ω–æ–≥–æ –∫–æ–¥–∞
3. **‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥** - Nordic Pro —Å—Ç–∏–ª—å –≤–µ–∑–¥–µ
4. **‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è —Å–µ—Ç–∫–∞** - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
5. **‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –µ–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥
6. **‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∫–æ–¥** - –ª–µ–≥–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

`asset_service.py` —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏–∑ `chart_styles.py`, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π, –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π –∏ –ª–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –∫–æ–¥! üé®‚ú®
