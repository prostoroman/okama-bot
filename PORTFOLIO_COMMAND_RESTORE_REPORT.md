# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã /portfolio

## –î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
2025-08-31

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ `/portfolio lqdt.moex:0.78 oblg.moex:0.16 gold.moex:0.06` –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

## üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 1. –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–∏–º–≤–æ–ª–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**: –°–∏–º–≤–æ–ª—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã –¥–ª—è –±–∏—Ä–∂–µ–≤—ã—Ö —Å—É—Ñ—Ñ–∏–∫—Å–æ–≤.

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ**:
```
lqdt.moex:0.78 oblg.moex:0.16 gold.moex:0.06
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ**:
```
LQDT.MOEX:0.78 OBLG.MOEX:0.16 GOLD.MOEX:0.06
```

### 2. –ü—Ä–æ–±–ª–µ–º–∞ —Å CAGR

**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ CAGR –±—ã–ª —É–¥–∞–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–µ:
```
TypeError: unsupported format string passed to Series.__format__
```

**–ü—Ä–∏—á–∏–Ω–∞**: –ú–µ—Ç–æ–¥ `portfolio.get_cagr()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç pandas Series –≤–º–µ—Å—Ç–æ —Å–∫–∞–ª—è—Ä–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ CAGR

**–§–∞–π–ª**: `bot.py`
**–ú–µ—Ç–æ–¥**: `_create_portfolio_returns_chart`
**–°—Ç—Ä–æ–∫–∏**: 3010-3020

**–î–æ–±–∞–≤–ª–µ–Ω–æ**: –û–±—Ä–∞–±–æ—Ç–∫–∞ CAGR –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è:

```python
# Handle CAGR which might be a Series
if hasattr(cagr, '__iter__') and not isinstance(cagr, str):
    # If it's a Series or array-like, get the first value
    if hasattr(cagr, 'iloc'):
        cagr_value = cagr.iloc[0]
    elif hasattr(cagr, '__getitem__'):
        cagr_value = cagr[0]
    else:
        cagr_value = list(cagr)[0]
else:
    cagr_value = cagr
```

### 2. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å**:
```
/portfolio LQDT.MOEX:0.78 OBLG.MOEX:0.16 GOLD.MOEX:0.06
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –£—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è:
```
‚úÖ –ü–æ—Ä—Ç—Ñ–µ–ª—å —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!
üìä –ê–∫—Ç–∏–≤—ã: ['LQDT.MOEX', 'OBLG.MOEX', 'GOLD.MOEX']
üìä –í–µ—Å–∞: [0.78, 0.16, 0.06]
üí∞ –í–∞–ª—é—Ç–∞: RUB
üìÖ –ü–µ—Ä–≤–∞—è –¥–∞—Ç–∞: 2020-08-01 00:00:00
üìÖ –ü–æ—Å–ª–µ–¥–Ω—è—è –¥–∞—Ç–∞: 2025-07-01 00:00:00
‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–∏–æ–¥–∞: 4.9
```

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê** ‚úÖ

- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ CAGR
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/portfolio` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã –≤ –±–∏—Ä–∂–µ–≤—ã—Ö —Å—É—Ñ—Ñ–∏–∫—Å–∞—Ö:
- `LQDT.MOEX` –≤–º–µ—Å—Ç–æ `lqdt.moex`
- `OBLG.MOEX` –≤–º–µ—Å—Ç–æ `oblg.moex`
- `GOLD.MOEX` –≤–º–µ—Å—Ç–æ `gold.moex`

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:
–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤ –≤ –≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä –≤ –∫–æ–º–∞–Ω–¥–µ `/portfolio` –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX.
