# –û—Ç—á–µ—Ç –æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –∫–æ–º–∞–Ω–¥—ã /portfolio

## –î–∞—Ç–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
2025-08-31

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–ö–æ–º–∞–Ω–¥–∞ `/portfolio lqdt.moex:0.78 oblg.moex:0.16 gold.moex:0.06` –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

## üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 1. –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–∏–º–≤–æ–ª–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**: –°–∏–º–≤–æ–ª—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã –¥–ª—è –±–∏—Ä–∂–µ–≤—ã—Ö —Å—É—Ñ—Ñ–∏–∫—Å–æ–≤.

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ**:
```
lqdt.moex:0.78 oblg.moex:0.16 gold.moex:0.06
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ**:
```
LQDT.MOEX:0.78 OBLG.MOEX:0.16 GOLD.MOEX:0.06
```

**–û—à–∏–±–∫–∞**: `ValueError: moex is not in allowed assets namespaces: ['US', 'LSE', 'XETR', 'XFRA', 'XSTU', 'XAMS', 'MOEX', 'XTAE', 'PIF', 'FX', 'CC', 'INDX', 'COMM', 'RE', 'CBR', 'PF']`

### 2. –£—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ—Ä—Ç—Ñ–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ:

```
‚úÖ –ü–æ—Ä—Ç—Ñ–µ–ª—å —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!
üìä –ê–∫—Ç–∏–≤—ã: ['LQDT.MOEX', 'OBLG.MOEX', 'GOLD.MOEX']
üìä –í–µ—Å–∞: [0.78, 0.16, 0.06]
üí∞ –í–∞–ª—é—Ç–∞: RUB
üìÖ –ü–µ—Ä–≤–∞—è –¥–∞—Ç–∞: 2020-08-01 00:00:00
üìÖ –ü–æ—Å–ª–µ–¥–Ω—è—è –¥–∞—Ç–∞: 2025-07-01 00:00:00
‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–∏–æ–¥–∞: 4.9
```

### 3. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Ä—Ç—Ñ–µ–ª–µ

**–î–∞—Ç—ã –ø–µ—Ä–≤–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–æ–≤**:
- RUB: 1992-08-01 00:00:00
- OBLG.MOEX: 2019-03-01 00:00:00
- LQDT.MOEX: 2020-02-01 00:00:00
- GOLD.MOEX: 2020-08-01 00:00:00
- RUB.INFL: 1991-01-01 00:00:00

**–°–æ–±—ã—Ç–∏—è —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏**: –ï–∂–µ–º–µ—Å—è—á–Ω–∞—è —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (calendar)

### 4. –ü—Ä–æ–±–ª–µ–º—ã —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**–û—à–∏–±–∫–∞**: `TypeError: unsupported format string passed to Series.__format__`

**–ü—Ä–∏—á–∏–Ω–∞**: `wealth_index.iloc[0]` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç pandas Series, –∞ –Ω–µ —Å–∫–∞–ª—è—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

**–†–µ—à–µ–Ω–∏–µ**: –ù—É–∂–Ω–æ –∏–∑–≤–ª–µ—á—å —Å–∫–∞–ª—è—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ Series.

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞**: –ö–æ–º–∞–Ω–¥–∞ `/portfolio` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º —Å–∏–º–≤–æ–ª–æ–≤.

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å**:
```
/portfolio LQDT.MOEX:0.78 OBLG.MOEX:0.16 GOLD.MOEX:0.06
```

**–ü—Ä–æ–±–ª–µ–º—ã –≤ –∫–æ–¥–µ –±–æ—Ç–∞**:
1. ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Å–∏–º–≤–æ–ª–æ–≤ –∏ –≤–µ—Å–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∞–ª—é—Ç—ã —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. ‚ö†Ô∏è –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Series —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã –≤ –±–∏—Ä–∂–µ–≤—ã—Ö —Å—É—Ñ—Ñ–∏–∫—Å–∞—Ö:
- `LQDT.MOEX` –≤–º–µ—Å—Ç–æ `lqdt.moex`
- `OBLG.MOEX` –≤–º–µ—Å—Ç–æ `oblg.moex`
- `GOLD.MOEX` –≤–º–µ—Å—Ç–æ `gold.moex`

### 2. –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
–î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤ –≤ –≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä –≤ –∫–æ–º–∞–Ω–¥–µ `/portfolio`:

```python
# –í –º–µ—Ç–æ–¥–µ portfolio_command
symbol = symbol.upper()  # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ –≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä
```

### 3. –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
–î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```python
if '.moex' in symbol.lower():
    corrected_symbol = symbol.upper()
    await update.message.reply_text(
        f"‚ö†Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç —Å–∏–º–≤–æ–ª–∞: {symbol} ‚Üí {corrected_symbol}\n"
        f"–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã –¥–ª—è –±–∏—Ä–∂–µ–≤—ã—Ö —Å—É—Ñ—Ñ–∏–∫—Å–æ–≤."
    )
```

## üìä –°—Ç–∞—Ç—É—Å

**–ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê** ‚úÖ

- ‚úÖ –ü–æ—Ä—Ç—Ñ–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
- ‚úÖ –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏–µ UX (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤)
