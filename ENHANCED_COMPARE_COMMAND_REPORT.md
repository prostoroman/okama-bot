# –û—Ç—á–µ—Ç –æ–± —É–ª—É—á—à–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã /compare

## üéØ –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### 1. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ "–∑–∞–ø—è—Ç–∞—è+–ø—Ä–æ–±–µ–ª"
–ö–æ–º–∞–Ω–¥–∞ `/compare` —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **—Ç—Ä–∏ —Ñ–æ—Ä–º–∞—Ç–∞** —É–∫–∞–∑–∞–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤:
- **–ß–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª**: `/compare SPY.US QQQ.US`
- **–ß–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é**: `/compare SPY.US,QQQ.US`
- **–ó–∞–ø—è—Ç–∞—è+–ø—Ä–æ–±–µ–ª**: `/compare SPY.US, QQQ.US, VOO.US`

### 2. –ü–µ—Ä–∏–æ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è - –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –ª–µ—Ç
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –Ω–∞ **–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –ª–µ—Ç** –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö.

## üîÑ –£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥ –ø–∞—Ä—Å–∏–Ω–≥–∞
```python
# Support multiple formats: space-separated, comma-separated, and comma+space
raw_args = ' '.join(context.args)  # Join all arguments into one string

# Enhanced parsing logic for multiple formats
if ',' in raw_args:
    # Handle comma-separated symbols (with or without spaces)
    # Split by comma and clean each symbol
    symbols = []
    for symbol_part in raw_args.split(','):
        # Handle cases like "SPY.US, QQQ.US" (comma + space)
        symbol_part = symbol_part.strip()
        if symbol_part:  # Only add non-empty symbols
            symbols.append(symbol_part.upper())
    self.logger.info(f"Parsed comma-separated symbols: {symbols}")
else:
    # Handle space-separated symbols (original behavior)
    symbols = [symbol.upper() for symbol in context.args]
    self.logger.info(f"Parsed space-separated symbols: {symbols}")

# Clean up symbols (remove empty strings and whitespace)
symbols = [symbol for symbol in symbols if symbol.strip()]
```

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
1. **–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤** –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∑–∞–ø—è—Ç—ã—Ö** –≤ —Å—Ç—Ä–æ–∫–µ
3. **–£–ª—É—á—à–µ–Ω–Ω—ã–π —Ä–∞–∑–±–æ—Ä –ø–æ –∑–∞–ø—è—Ç—ã–º** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ–±–µ–ª–æ–≤
4. **–û—á–∏—Å—Ç–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤** –æ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫
5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üìÖ –ü–µ—Ä–∏–æ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è - 10 –ª–µ—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ø–µ—Ä–∏–æ–¥–∞
```python
# Calculate date 10 years ago from today
from datetime import datetime, timedelta
end_date = datetime.now()
start_date = end_date - timedelta(days=365*10)  # 10 years

# Format dates for okama (YYYY-MM format)
start_date_str = start_date.strftime("%Y-%m")
end_date_str = end_date.strftime("%Y-%m")

# Create AssetList with period limits
asset_list = ok.AssetList(symbols, ccy=currency, first_date=start_date_str, last_date=end_date_str)
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ 10-–ª–µ—Ç–Ω–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞
- **–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ä—ã–Ω–æ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤** (–±—ã—á—å–∏ –∏ –º–µ–¥–≤–µ–∂—å–∏ —Ä—ã–Ω–∫–∏)
- **–î–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è** –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã** –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–ø—Ä–∞–≤–∫–∏

### –ö–æ–º–∞–Ω–¥–∞ /compare
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã —Å –∑–∞–ø—è—Ç—ã–º–∏+–ø—Ä–æ–±–µ–ª–∞–º–∏
- –ü–æ–∫–∞–∑–∞–Ω—ã –≤—Å–µ —Ç—Ä–∏ —Ñ–æ—Ä–º–∞—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–µ—Ä–∏–æ–¥–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

### –ö–æ–º–∞–Ω–¥–∞ /start
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã —Å –Ω–æ–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º
- –ü–æ–∫–∞–∑–∞–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–∏–±–∫–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É–ª—É—á—à–µ–Ω–∏–π

### 1. –£–¥–æ–±—Å—Ç–≤–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ Excel**: `SBER.MOEX, GAZP.MOEX, LKOH.MOEX`
- **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**: `SPY.US, QQQ.US, VOO.US` (—Å –ø—Ä–æ–±–µ–ª–∞–º–∏)
- **–ì–∏–±–∫–æ—Å—Ç—å**: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π —É–¥–æ–±–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

### 2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
- **–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –æ—à–∏–±–∫–∞–º** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –≤—Å–µ —Å—Ç–∞—Ä—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç

### 3. –ö–∞—á–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏–∑–∞
- **–†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥** - –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –ª–µ—Ç
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –∑–Ω–∞—á–∏–º–æ—Å—Ç—å** - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- ‚úÖ –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (—á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª)
- ‚úÖ –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (–∑–∞–ø—è—Ç–∞—è+–ø—Ä–æ–±–µ–ª)**
- ‚úÖ –°–º–µ—à–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫ –∏ –ø—Ä–æ–±–µ–ª–æ–≤
- ‚úÖ –†–∞—Å—á–µ—Ç –ø–µ—Ä–∏–æ–¥–∞ (10 –ª–µ—Ç)

### –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤
```
/compare SPY.US QQQ.US              ‚Üí ['SPY.US', 'QQQ.US']
/compare SPY.US,QQQ.US              ‚Üí ['SPY.US', 'QQQ.US']
/compare SPY.US, QQQ.US             ‚Üí ['SPY.US', 'QQQ.US']
/compare SPY.US, QQQ.US, VOO.US     ‚Üí ['SPY.US', 'QQQ.US', 'VOO.US']
/compare SBER.MOEX, GAZP.MOEX       ‚Üí ['SBER.MOEX', 'GAZP.MOEX']
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ Excel**: `SBER.MOEX, GAZP.MOEX, LKOH.MOEX`
- **–ß–∏—Ç–∞–µ–º—ã–π –≤–≤–æ–¥**: `SPY.US, QQQ.US, VOO.US`
- **–ë—ã—Å—Ç—Ä—ã–π –≤–≤–æ–¥**: `SPY.US,QQQ.US,VOO.US`
- **–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±**: `SPY.US QQQ.US VOO.US`

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- –õ–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π –≤ –±—É–¥—É—â–µ–º
- –•–æ—Ä–æ—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ edge cases

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –∫–æ–º–∞–Ω–¥–∞ `/compare` —Å—Ç–∞–ª–∞ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —É–¥–æ–±–Ω–æ–π –∏ –≥–∏–±–∫–æ–π**:
- ‚úÖ **–¢—Ä–∏ —Ñ–æ—Ä–º–∞—Ç–∞ –≤–≤–æ–¥–∞** —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∞–ª—é—Ç—ã** –ø–æ –ø–µ—Ä–≤–æ–º—É –∞–∫—Ç–∏–≤—É
- ‚úÖ **–ü–µ—Ä–∏–æ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è 10 –ª–µ—Ç** –¥–ª—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- ‚úÖ **–ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
- ‚úÖ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑** –∞–∫—Ç–∏–≤–æ–≤

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π —É–¥–æ–±–Ω—ã–π –¥–ª—è –Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç, –∏ –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏–º–≤–æ–ª—ã, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø–æ–¥—Ö–æ–¥—è—â—É—é –≤–∞–ª—é—Ç—É –∏ –ø–µ—Ä–∏–æ–¥ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞!
